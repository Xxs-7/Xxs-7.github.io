<!DOCTYPE html><html lang="cn"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/9028decf9ceeb2fa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9028decf9ceeb2fa.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-38cee4c0e358b1a3.js" defer=""></script><script src="/_next/static/chunks/framework-6698976aa0ea586d.js" defer=""></script><script src="/_next/static/chunks/main-9ca4f46f71f15dad.js" defer=""></script><script src="/_next/static/chunks/pages/_app-233c820ee5f72f94.js" defer=""></script><script src="/_next/static/chunks/7a7c95a0-ab903f899792323b.js" defer=""></script><script src="/_next/static/chunks/581-340f217658a3c725.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...id%5D%5D-706fc642a67ce3cd.js" defer=""></script><script src="/_next/static/ntD6QUMlZQsl3mf9dMsvt/_buildManifest.js" defer=""></script><script src="/_next/static/ntD6QUMlZQsl3mf9dMsvt/_ssgManifest.js" defer=""></script></head><body class=" bg-light text-light-text dark:bg-dark dark:text-dark-text max-sm:text-sm"><script>
                (function () {
                  function setTheme(newTheme) {
                    window.__theme = newTheme;
                    if (newTheme === 'dark') {
                      document.documentElement.classList.add('dark');
                    } else if (newTheme === 'light') {
                      document.documentElement.classList.remove('dark');
                    }
                  }

                  var preferredTheme;
                  try {
                    preferredTheme = localStorage.getItem('theme');
                  } catch (err) { }

                  window.__setPreferredTheme = function(newTheme) {
                    preferredTheme = newTheme;
                    setTheme(newTheme);
                    try {
                      localStorage.setItem('theme', newTheme);
                    } catch (err) { }
                  };

                  var initialTheme = preferredTheme;
                  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

                  if (!initialTheme) {
                    initialTheme = darkQuery.matches ? 'dark' : 'light';
                  }
                  setTheme(initialTheme);

                  darkQuery.addEventListener('change', function (e) {
                    if (!preferredTheme) {
                      setTheme(e.matches ? 'dark' : 'light');
                    }
                  });
                })();
              </script><div id="__next"><header class="w-full fixed t-0 h-14 border-b backdrop-blur border-slate-900/10 dark:border-slate-300/10 z-10"><div class="w-full h-full flex flex-row items-center justify-between px-4"><div>厘清逻辑</div><div class="mr-2 flex flex-row items-center justify-between gap-2 text-xl"><a href="https://github.com/Xxs-7/Xxs-7.github.io" class="p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a><button class="block dark:hidden p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" type="button" aria-label="Use Dark Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"></path></svg></button><button type="button" class="hidden dark:block p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" aria-label="Use Light Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z"></path></svg></button></div></div></header><div class="pt-14 flex max-w-screen overflow-y-scroll"><nav class="hidden lg:block fixed top-14 lg:bottom-0 lg:h-screen w-[18rem] pb-10 px-4 overflow-y-auto min-h-screen z-10"><nav><ul class="mt-6"><!--$--><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">html</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/SemanticsTag">语义化标签</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/anchor">锚元素</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">css</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/flex">flex 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/grid">grid 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/unit">布局单位</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">javascript</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/promise">promise</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/async-await">async 和 await</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/execution-context">执行上下文</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/scopes">作用域</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/lifecycle">lifecycle</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/hook">hook</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5 text-highlight"><a class="block" href="/react/high-compoment">组件逻辑复用方案</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react 源码</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/architecture">源码架构</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/fiber-node">fiber 节点</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-mode">渲染模式</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/scheduler">scheduler</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/first-render">初次渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/update-render">更新渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-task">渲染任务的执行</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/context">Context</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">实践</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/music-player">音乐播放器</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/font-advance">字体库优化</a></li></ul></li><!--/$--></ul></nav></nav><main class="relative lg:ml-[18rem] min-w-0 flex-1 px-5 "><article class="mx-auto xl:max-w-none overflow-x-hidden xl:ml-0 xl:mr-[18rem]"><h1 class="mdx-heading text-3xl font-extrabold my-6 text-header dark:text-header-dark" id="高阶组件">高阶组件</h1>
<p class="whitespace-pre-wrap my-2 ">react 为什么要用 hook，其原因之一就是为了能更好的复用代码逻辑。</p>
<p class="whitespace-pre-wrap my-2 ">以下是实现代码逻辑复用的一些方案。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="mixin">mixin<a href="#mixin" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<pre><!--$--><div class="prism-code language-jsx rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="whitespace-pre-wrap"> mixinDefaultProps </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">getDefaultProps</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">        </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap">displayName</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(255, 121, 198)">&#x27;component&#x27;</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ExampleComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">React</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">createClass</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">mixins</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">[</span><span class="whitespace-pre-wrap">mixinDefaultProps</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">]</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">render</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">        </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">&lt;</span><span class="whitespace-pre-wrap" style="color:rgb(255, 121, 198)">div</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">&gt;</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">props</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">displayName</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">&lt;/</span><span class="whitespace-pre-wrap" style="color:rgb(255, 121, 198)">div</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
<p class="whitespace-pre-wrap my-2 "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">ExampleComponent</code> 组件的<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">props</code>中都含有一个默认的<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">displayName</code></p>
<p class="whitespace-pre-wrap my-2 ">缺点</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">
<p class="whitespace-pre-wrap my-2 ">多个 Mixin 之间可能产⽣冲突，⽐如：多个 Mixin 中定义了相同的 state 字段，在一个组件中同时引入这些 Mixin 后会产生字段冲突。</p>
<p class="whitespace-pre-wrap my-2 ">对于非生命周期函数，如果命名出现冲突，直接报错。</p>
</li>
<li class="leading-relaxed ">
<p class="whitespace-pre-wrap my-2 ">组件与 Mixin 之间存在隐式依赖（Mixin 经常依赖于组件的特定⽅法，但在定义组件时并不知道这种依赖关系）</p>
</li>
<li class="leading-relaxed ">
<p class="whitespace-pre-wrap my-2 ">Mixin 倾向于增加更多状态，这降低了应⽤的可预测性，状态越多越难管理和溯源，复杂度剧增</p>
</li>
<li class="leading-relaxed ">
<p class="whitespace-pre-wrap my-2 ">隐式依赖导致依赖关系不透明，维护成本和理解成本迅速攀升：</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">难以快速理解组件的⾏为，需要全盘了解所有依赖 Mixin 的扩展⾏为及其之间的相互影响</li>
<li class="leading-relaxed ">组件⾃身的⽅法和 state 字段不敢轻易删改，因为难以确定有没有 Mixin 依赖它</li>
<li class="leading-relaxed ">Mixin 也难以维护，因为 Mixin 逻辑最后会被摊平合并到⼀起，很难搞清楚⼀个 Mixin 的输⼊输出</li>
</ul>
</li>
</ul>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="hoc">Hoc<a href="#hoc" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">优点：</p>
<p class="whitespace-pre-wrap my-2 ">相⽐ Mixin，HoC 通过外层组件传递 props 来影响内层组件的状态，⽽不是直接改变其 state，这就不存在冲突和互相⼲扰，降低了耦合度。不同于 Mixin 的打平 + 合并，HoC 天然具有层级结构（组件树结构），这⼜降低了复杂度。</p>
<p class="whitespace-pre-wrap my-2 ">缺点：</p>
<p class="whitespace-pre-wrap my-2 ">扩展性限制：HoC ⽆法从外部访问⼦组件的 state，因此⽆法通过 shouldComponentUpdate 滤掉不必要的更新；React 在⽀持ES6 Class 之后提供了 React.PureComponent 解决了这个问题</p>
<p class="whitespace-pre-wrap my-2 ">Ref 传递问题：Ref 被隔断。后来出现了 React.forwardRef 来解决了这个问题</p>
<p class="whitespace-pre-wrap my-2 ">包装地狱（Wrapper Hell）：和回调函数类似，HoC 如果出现多层包裹组件的情况，就会和回调函数一样层层嵌套；而这种多层抽象同样也增加了复杂度和理解成本</p>
<p class="whitespace-pre-wrap my-2 ">命名冲突：如果⾼阶组件多次嵌套而没有使⽤命名空间，就可能会产⽣冲突，覆盖⽼的属性</p>
<p class="whitespace-pre-wrap my-2 ">不可⻅性：Hoc 相当于在原有组件外层再包装⼀个组件，你有可能压根都不知道外层的包装是什么，对于你来说完全是⿊盒</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="render-props">render props<a href="#render-props" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">将要复用的 state 和操作 state 的方法封装到一个组件中</li>
<li class="leading-relaxed ">对组件向外暴露 state 和操作state的方法(子组件向父组件传递数据)：调用 props 的 render 方法</li>
</ul>
<pre><!--$--><div class="prism-code language-js rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">   </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">render</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">       </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">           </span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">div</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">               </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// 对外暴露了，组件状态和操作组件状态的方法</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">               </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">props</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">render</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">state</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">count</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">handleCount</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">           </span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">/</span><span class="whitespace-pre-wrap">div</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">       </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">   </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">
<p class="whitespace-pre-wrap my-2 ">调用父组件传递进来的函数，把 state 和操作 state 的方法作为函数参数传递进去</p>
<pre><!--$--><div class="prism-code language-js rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">div</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">Counter</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">        render</span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap">count</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> handleCount</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">            </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">button onClick</span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap">handleCount</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"> 我被点击了</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap">count</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap">次</span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">/</span><span class="whitespace-pre-wrap">button</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">        </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">/</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">/</span><span class="whitespace-pre-wrap">div</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
</li>
</ul>
<p class="whitespace-pre-wrap my-2 ">缺点：</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">使用繁琐: HOC使用只需要借助装饰器语法通常一行代码就可以进行复用,Render Props无法做到如此简单</li>
<li class="leading-relaxed ">嵌套过深: Render Props虽然摆脱了组件多层嵌套的问题,但是转化为了函数回调的嵌套</li>
</ul>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="react-hooks">React Hooks<a href="#react-hooks" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">优点：</p>
<ol class="ml-6 my-3 list-decimal">
<li class="leading-relaxed ">简洁：React Hooks 解决了 HoC 和 Render Props 的嵌套问题，代码更加简洁</li>
<li class="leading-relaxed ">解耦：React Hooks 可以更⽅便地把 UI 和状态分离，做到更彻底的解耦</li>
<li class="leading-relaxed ">组合：Hooks 中可以通过引⽤另外的 Hooks 以此形成新的 Hooks，变化丰富</li>
<li class="leading-relaxed ">函数友好：React Hooks 为函数组件⽽⽣，从⽽解决了类组件的⼏⼤问题:</li>
</ol>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">this 指向容易错误</li>
<li class="leading-relaxed ">分割在不同声明周期中的逻辑会使得代码难以理解和维护</li>
<li class="leading-relaxed ">代码复⽤成本⾼（⾼阶组件容易使代码量剧增）</li>
</ul>
<p class="whitespace-pre-wrap my-2 ">缺点：</p>
<ol class="ml-6 my-3 list-decimal">
<li class="leading-relaxed ">有额外的学习成本（需要学习和区分类组件、函数组件）</li>
<li class="leading-relaxed ">写法上有限制（不能出现在条件、循环中），并且这种写法限制会增加代码重构时的成本</li>
<li class="leading-relaxed ">破坏了 PureComponent、React.memo 浅⽐较的性能优化效果（为了获取最新的 props 和 state，每次 render() 都要重新创建事件处理函数）</li>
<li class="leading-relaxed ">在闭包场景中可能会引⽤到旧的 state、props 值，内部实现上不直观（依赖⼀份可变的全局状态，不再那么“纯”）
5.. React.memo 并不能完全替代 shouldComponentUpdate（因为获取不到 state 的变化，只针对 props 的变化）</li>
</ol></article><aside class="hidden xl:block fixed top-14 right-0 w-[18rem] py-6 overflow-y-auto"><ul class="text-sm font-medium"><li class="pl-2 text-base">高阶组件</li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#mixin" class="block py-1">mixin</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#hoc" class="block py-1">Hoc</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#render-props" class="block py-1">render props</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#react-hooks" class="block py-1">React Hooks</a></li></ul></aside></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"toc":[{"text":"高阶组件","hash":"#高阶组件","depth":1},{"text":"mixin","hash":"#mixin","depth":2},{"text":"Hoc","hash":"#hoc","depth":2},{"text":"render props","hash":"#render-props","depth":2},{"text":"React Hooks","hash":"#react-hooks","depth":2}],"code":"var Component=(()=\u003e{var a=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var C=(i,n)=\u003e()=\u003e(n||i((n={exports:{}}).exports,n),n.exports),H=(i,n)=\u003e{for(var r in n)c(i,r,{get:n[r],enumerable:!0})},h=(i,n,r,d)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let l of u(n))!x.call(i,l)\u0026\u0026l!==r\u0026\u0026c(i,l,{get:()=\u003en[l],enumerable:!(d=p(n,l))||d.enumerable});return i};var M=(i,n,r)=\u003e(r=i!=null?a(m(i)):{},h(n||!i||!i.__esModule?c(r,\"default\",{value:i,enumerable:!0}):r,i)),R=i=\u003eh(c({},\"__esModule\",{value:!0}),i);var o=C((v,t)=\u003e{t.exports=_jsx_runtime});var j={};H(j,{default:()=\u003eg});var e=M(o());function s(i){let n=Object.assign({h1:\"h1\",p:\"p\",h2:\"h2\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\",ol:\"ol\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{hash:\"\\u9AD8\\u9636\\u7EC4\\u4EF6\",children:\"\\u9AD8\\u9636\\u7EC4\\u4EF6\"}),`\n`,(0,e.jsx)(n.p,{children:\"react \\u4E3A\\u4EC0\\u4E48\\u8981\\u7528 hook\\uFF0C\\u5176\\u539F\\u56E0\\u4E4B\\u4E00\\u5C31\\u662F\\u4E3A\\u4E86\\u80FD\\u66F4\\u597D\\u7684\\u590D\\u7528\\u4EE3\\u7801\\u903B\\u8F91\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4EE5\\u4E0B\\u662F\\u5B9E\\u73B0\\u4EE3\\u7801\\u903B\\u8F91\\u590D\\u7528\\u7684\\u4E00\\u4E9B\\u65B9\\u6848\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"mixin\",children:\"mixin\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`var mixinDefaultProps = {\n    getDefaultProps: function(){\n        return {displayName: 'component'}\n    }\n}\n\nvar ExampleComponent = React.createClass({\n    mixins: [mixinDefaultProps],\n    render: function(){\n        return \u003cdiv\u003e{this.props.displayName}\u003c/div\u003e\n    }\n});\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"ExampleComponent\"}),\" \\u7EC4\\u4EF6\\u7684\",(0,e.jsx)(n.code,{children:\"props\"}),\"\\u4E2D\\u90FD\\u542B\\u6709\\u4E00\\u4E2A\\u9ED8\\u8BA4\\u7684\",(0,e.jsx)(n.code,{children:\"displayName\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7F3A\\u70B9\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u591A\\u4E2A Mixin \\u4E4B\\u95F4\\u53EF\\u80FD\\u4EA7\\u2F63\\u51B2\\u7A81\\uFF0C\\u2F50\\u5982\\uFF1A\\u591A\\u4E2A Mixin \\u4E2D\\u5B9A\\u4E49\\u4E86\\u76F8\\u540C\\u7684 state \\u5B57\\u6BB5\\uFF0C\\u5728\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u4E2D\\u540C\\u65F6\\u5F15\\u5165\\u8FD9\\u4E9B Mixin \\u540E\\u4F1A\\u4EA7\\u751F\\u5B57\\u6BB5\\u51B2\\u7A81\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5BF9\\u4E8E\\u975E\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\\uFF0C\\u5982\\u679C\\u547D\\u540D\\u51FA\\u73B0\\u51B2\\u7A81\\uFF0C\\u76F4\\u63A5\\u62A5\\u9519\\u3002\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u7EC4\\u4EF6\\u4E0E Mixin \\u4E4B\\u95F4\\u5B58\\u5728\\u9690\\u5F0F\\u4F9D\\u8D56\\uFF08Mixin \\u7ECF\\u5E38\\u4F9D\\u8D56\\u4E8E\\u7EC4\\u4EF6\\u7684\\u7279\\u5B9A\\u2F45\\u6CD5\\uFF0C\\u4F46\\u5728\\u5B9A\\u4E49\\u7EC4\\u4EF6\\u65F6\\u5E76\\u4E0D\\u77E5\\u9053\\u8FD9\\u79CD\\u4F9D\\u8D56\\u5173\\u7CFB\\uFF09\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Mixin \\u503E\\u5411\\u4E8E\\u589E\\u52A0\\u66F4\\u591A\\u72B6\\u6001\\uFF0C\\u8FD9\\u964D\\u4F4E\\u4E86\\u5E94\\u2F64\\u7684\\u53EF\\u9884\\u6D4B\\u6027\\uFF0C\\u72B6\\u6001\\u8D8A\\u591A\\u8D8A\\u96BE\\u7BA1\\u7406\\u548C\\u6EAF\\u6E90\\uFF0C\\u590D\\u6742\\u5EA6\\u5267\\u589E\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u9690\\u5F0F\\u4F9D\\u8D56\\u5BFC\\u81F4\\u4F9D\\u8D56\\u5173\\u7CFB\\u4E0D\\u900F\\u660E\\uFF0C\\u7EF4\\u62A4\\u6210\\u672C\\u548C\\u7406\\u89E3\\u6210\\u672C\\u8FC5\\u901F\\u6500\\u5347\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u96BE\\u4EE5\\u5FEB\\u901F\\u7406\\u89E3\\u7EC4\\u4EF6\\u7684\\u2F8F\\u4E3A\\uFF0C\\u9700\\u8981\\u5168\\u76D8\\u4E86\\u89E3\\u6240\\u6709\\u4F9D\\u8D56 Mixin \\u7684\\u6269\\u5C55\\u2F8F\\u4E3A\\u53CA\\u5176\\u4E4B\\u95F4\\u7684\\u76F8\\u4E92\\u5F71\\u54CD\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7EC4\\u4EF6\\u2F83\\u8EAB\\u7684\\u2F45\\u6CD5\\u548C state \\u5B57\\u6BB5\\u4E0D\\u6562\\u8F7B\\u6613\\u5220\\u6539\\uFF0C\\u56E0\\u4E3A\\u96BE\\u4EE5\\u786E\\u5B9A\\u6709\\u6CA1\\u6709 Mixin \\u4F9D\\u8D56\\u5B83\"}),`\n`,(0,e.jsx)(n.li,{children:\"Mixin \\u4E5F\\u96BE\\u4EE5\\u7EF4\\u62A4\\uFF0C\\u56E0\\u4E3A Mixin \\u903B\\u8F91\\u6700\\u540E\\u4F1A\\u88AB\\u644A\\u5E73\\u5408\\u5E76\\u5230\\u2F00\\u8D77\\uFF0C\\u5F88\\u96BE\\u641E\\u6E05\\u695A\\u2F00\\u4E2A Mixin \\u7684\\u8F93\\u2F0A\\u8F93\\u51FA\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{hash:\"hoc\",children:\"Hoc\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F18\\u70B9\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u76F8\\u2F50 Mixin\\uFF0CHoC \\u901A\\u8FC7\\u5916\\u5C42\\u7EC4\\u4EF6\\u4F20\\u9012 props \\u6765\\u5F71\\u54CD\\u5185\\u5C42\\u7EC4\\u4EF6\\u7684\\u72B6\\u6001\\uFF0C\\u2F7D\\u4E0D\\u662F\\u76F4\\u63A5\\u6539\\u53D8\\u5176 state\\uFF0C\\u8FD9\\u5C31\\u4E0D\\u5B58\\u5728\\u51B2\\u7A81\\u548C\\u4E92\\u76F8\\u2F32\\u6270\\uFF0C\\u964D\\u4F4E\\u4E86\\u8026\\u5408\\u5EA6\\u3002\\u4E0D\\u540C\\u4E8E Mixin \\u7684\\u6253\\u5E73 + \\u5408\\u5E76\\uFF0CHoC \\u5929\\u7136\\u5177\\u6709\\u5C42\\u7EA7\\u7ED3\\u6784\\uFF08\\u7EC4\\u4EF6\\u6811\\u7ED3\\u6784\\uFF09\\uFF0C\\u8FD9\\u2F1C\\u964D\\u4F4E\\u4E86\\u590D\\u6742\\u5EA6\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7F3A\\u70B9\\uFF1A\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u6269\\u5C55\\u6027\\u9650\\u5236\\uFF1AHoC \\u2F46\\u6CD5\\u4ECE\\u5916\\u90E8\\u8BBF\\u95EE\\u2F26\\u7EC4\\u4EF6\\u7684 state\\uFF0C\\u56E0\\u6B64\\u2F46\\u6CD5\\u901A\\u8FC7 shouldComponentUpdate \\u6EE4\\u6389\\u4E0D\\u5FC5\\u8981\\u7684\\u66F4\\u65B0\\uFF1BReact \\u5728\\u2F40\\u6301ES6 Class \\u4E4B\\u540E\\u63D0\\u4F9B\\u4E86 React.PureComponent \\u89E3\\u51B3\\u4E86\\u8FD9\\u4E2A\\u95EE\\u9898\"}),`\n`,(0,e.jsx)(n.p,{children:\"Ref \\u4F20\\u9012\\u95EE\\u9898\\uFF1ARef \\u88AB\\u9694\\u65AD\\u3002\\u540E\\u6765\\u51FA\\u73B0\\u4E86 React.forwardRef \\u6765\\u89E3\\u51B3\\u4E86\\u8FD9\\u4E2A\\u95EE\\u9898\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5305\\u88C5\\u5730\\u72F1\\uFF08Wrapper Hell\\uFF09\\uFF1A\\u548C\\u56DE\\u8C03\\u51FD\\u6570\\u7C7B\\u4F3C\\uFF0CHoC \\u5982\\u679C\\u51FA\\u73B0\\u591A\\u5C42\\u5305\\u88F9\\u7EC4\\u4EF6\\u7684\\u60C5\\u51B5\\uFF0C\\u5C31\\u4F1A\\u548C\\u56DE\\u8C03\\u51FD\\u6570\\u4E00\\u6837\\u5C42\\u5C42\\u5D4C\\u5957\\uFF1B\\u800C\\u8FD9\\u79CD\\u591A\\u5C42\\u62BD\\u8C61\\u540C\\u6837\\u4E5F\\u589E\\u52A0\\u4E86\\u590D\\u6742\\u5EA6\\u548C\\u7406\\u89E3\\u6210\\u672C\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u547D\\u540D\\u51B2\\u7A81\\uFF1A\\u5982\\u679C\\u2FBC\\u9636\\u7EC4\\u4EF6\\u591A\\u6B21\\u5D4C\\u5957\\u800C\\u6CA1\\u6709\\u4F7F\\u2F64\\u547D\\u540D\\u7A7A\\u95F4\\uFF0C\\u5C31\\u53EF\\u80FD\\u4F1A\\u4EA7\\u2F63\\u51B2\\u7A81\\uFF0C\\u8986\\u76D6\\u2F7C\\u7684\\u5C5E\\u6027\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E0D\\u53EF\\u2EC5\\u6027\\uFF1AHoc \\u76F8\\u5F53\\u4E8E\\u5728\\u539F\\u6709\\u7EC4\\u4EF6\\u5916\\u5C42\\u518D\\u5305\\u88C5\\u2F00\\u4E2A\\u7EC4\\u4EF6\\uFF0C\\u4F60\\u6709\\u53EF\\u80FD\\u538B\\u6839\\u90FD\\u4E0D\\u77E5\\u9053\\u5916\\u5C42\\u7684\\u5305\\u88C5\\u662F\\u4EC0\\u4E48\\uFF0C\\u5BF9\\u4E8E\\u4F60\\u6765\\u8BF4\\u5B8C\\u5168\\u662F\\u2FCA\\u76D2\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"render-props\",children:\"render props\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5C06\\u8981\\u590D\\u7528\\u7684 state \\u548C\\u64CD\\u4F5C state \\u7684\\u65B9\\u6CD5\\u5C01\\u88C5\\u5230\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u4E2D\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5BF9\\u7EC4\\u4EF6\\u5411\\u5916\\u66B4\\u9732 state \\u548C\\u64CD\\u4F5Cstate\\u7684\\u65B9\\u6CD5(\\u5B50\\u7EC4\\u4EF6\\u5411\\u7236\\u7EC4\\u4EF6\\u4F20\\u9012\\u6570\\u636E)\\uFF1A\\u8C03\\u7528 props \\u7684 render \\u65B9\\u6CD5\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`   render() {\n       return (\n           \u003cdiv\u003e\n               // \\u5BF9\\u5916\\u66B4\\u9732\\u4E86\\uFF0C\\u7EC4\\u4EF6\\u72B6\\u6001\\u548C\\u64CD\\u4F5C\\u7EC4\\u4EF6\\u72B6\\u6001\\u7684\\u65B9\\u6CD5\n               { this.props.render(this.state.count, this.handleCount) }\n           \u003c/div\u003e\n       )\n   }\n`})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"\\u8C03\\u7528\\u7236\\u7EC4\\u4EF6\\u4F20\\u9012\\u8FDB\\u6765\\u7684\\u51FD\\u6570\\uFF0C\\u628A state \\u548C\\u64CD\\u4F5C state \\u7684\\u65B9\\u6CD5\\u4F5C\\u4E3A\\u51FD\\u6570\\u53C2\\u6570\\u4F20\\u9012\\u8FDB\\u53BB\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`\u003cdiv\u003e\n    \u003cCounter\n        render={(count, handleCount) =\u003e {\n            return \u003cbutton onClick={handleCount}\u003e \\u6211\\u88AB\\u70B9\\u51FB\\u4E86{count}\\u6B21\u003c/button\u003e\n        }}\n    /\u003e\n\u003c/div\u003e\n`})}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7F3A\\u70B9\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4F7F\\u7528\\u7E41\\u7410: HOC\\u4F7F\\u7528\\u53EA\\u9700\\u8981\\u501F\\u52A9\\u88C5\\u9970\\u5668\\u8BED\\u6CD5\\u901A\\u5E38\\u4E00\\u884C\\u4EE3\\u7801\\u5C31\\u53EF\\u4EE5\\u8FDB\\u884C\\u590D\\u7528,Render Props\\u65E0\\u6CD5\\u505A\\u5230\\u5982\\u6B64\\u7B80\\u5355\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5D4C\\u5957\\u8FC7\\u6DF1: Render Props\\u867D\\u7136\\u6446\\u8131\\u4E86\\u7EC4\\u4EF6\\u591A\\u5C42\\u5D4C\\u5957\\u7684\\u95EE\\u9898,\\u4F46\\u662F\\u8F6C\\u5316\\u4E3A\\u4E86\\u51FD\\u6570\\u56DE\\u8C03\\u7684\\u5D4C\\u5957\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{hash:\"react-hooks\",children:\"React Hooks\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F18\\u70B9\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u7B80\\u6D01\\uFF1AReact Hooks \\u89E3\\u51B3\\u4E86 HoC \\u548C Render Props \\u7684\\u5D4C\\u5957\\u95EE\\u9898\\uFF0C\\u4EE3\\u7801\\u66F4\\u52A0\\u7B80\\u6D01\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u89E3\\u8026\\uFF1AReact Hooks \\u53EF\\u4EE5\\u66F4\\u2F45\\u4FBF\\u5730\\u628A UI \\u548C\\u72B6\\u6001\\u5206\\u79BB\\uFF0C\\u505A\\u5230\\u66F4\\u5F7B\\u5E95\\u7684\\u89E3\\u8026\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7EC4\\u5408\\uFF1AHooks \\u4E2D\\u53EF\\u4EE5\\u901A\\u8FC7\\u5F15\\u2F64\\u53E6\\u5916\\u7684 Hooks \\u4EE5\\u6B64\\u5F62\\u6210\\u65B0\\u7684 Hooks\\uFF0C\\u53D8\\u5316\\u4E30\\u5BCC\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u51FD\\u6570\\u53CB\\u597D\\uFF1AReact Hooks \\u4E3A\\u51FD\\u6570\\u7EC4\\u4EF6\\u2F7D\\u2F63\\uFF0C\\u4ECE\\u2F7D\\u89E3\\u51B3\\u4E86\\u7C7B\\u7EC4\\u4EF6\\u7684\\u2F0F\\u2F24\\u95EE\\u9898:\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"this \\u6307\\u5411\\u5BB9\\u6613\\u9519\\u8BEF\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5206\\u5272\\u5728\\u4E0D\\u540C\\u58F0\\u660E\\u5468\\u671F\\u4E2D\\u7684\\u903B\\u8F91\\u4F1A\\u4F7F\\u5F97\\u4EE3\\u7801\\u96BE\\u4EE5\\u7406\\u89E3\\u548C\\u7EF4\\u62A4\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4EE3\\u7801\\u590D\\u2F64\\u6210\\u672C\\u2FBC\\uFF08\\u2FBC\\u9636\\u7EC4\\u4EF6\\u5BB9\\u6613\\u4F7F\\u4EE3\\u7801\\u91CF\\u5267\\u589E\\uFF09\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7F3A\\u70B9\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u6709\\u989D\\u5916\\u7684\\u5B66\\u4E60\\u6210\\u672C\\uFF08\\u9700\\u8981\\u5B66\\u4E60\\u548C\\u533A\\u5206\\u7C7B\\u7EC4\\u4EF6\\u3001\\u51FD\\u6570\\u7EC4\\u4EF6\\uFF09\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5199\\u6CD5\\u4E0A\\u6709\\u9650\\u5236\\uFF08\\u4E0D\\u80FD\\u51FA\\u73B0\\u5728\\u6761\\u4EF6\\u3001\\u5FAA\\u73AF\\u4E2D\\uFF09\\uFF0C\\u5E76\\u4E14\\u8FD9\\u79CD\\u5199\\u6CD5\\u9650\\u5236\\u4F1A\\u589E\\u52A0\\u4EE3\\u7801\\u91CD\\u6784\\u65F6\\u7684\\u6210\\u672C\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7834\\u574F\\u4E86 PureComponent\\u3001React.memo \\u6D45\\u2F50\\u8F83\\u7684\\u6027\\u80FD\\u4F18\\u5316\\u6548\\u679C\\uFF08\\u4E3A\\u4E86\\u83B7\\u53D6\\u6700\\u65B0\\u7684 props \\u548C state\\uFF0C\\u6BCF\\u6B21 render() \\u90FD\\u8981\\u91CD\\u65B0\\u521B\\u5EFA\\u4E8B\\u4EF6\\u5904\\u7406\\u51FD\\u6570\\uFF09\"}),`\n`,(0,e.jsx)(n.li,{children:`\\u5728\\u95ED\\u5305\\u573A\\u666F\\u4E2D\\u53EF\\u80FD\\u4F1A\\u5F15\\u2F64\\u5230\\u65E7\\u7684 state\\u3001props \\u503C\\uFF0C\\u5185\\u90E8\\u5B9E\\u73B0\\u4E0A\\u4E0D\\u76F4\\u89C2\\uFF08\\u4F9D\\u8D56\\u2F00\\u4EFD\\u53EF\\u53D8\\u7684\\u5168\\u5C40\\u72B6\\u6001\\uFF0C\\u4E0D\\u518D\\u90A3\\u4E48\\u201C\\u7EAF\\u201D\\uFF09\n5.. React.memo \\u5E76\\u4E0D\\u80FD\\u5B8C\\u5168\\u66FF\\u4EE3 shouldComponentUpdate\\uFF08\\u56E0\\u4E3A\\u83B7\\u53D6\\u4E0D\\u5230 state \\u7684\\u53D8\\u5316\\uFF0C\\u53EA\\u9488\\u5BF9 props \\u7684\\u53D8\\u5316\\uFF09`}),`\n`]})]})}function f(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(s,i)})):s(i)}var g=f;return R(j);})();\n;return Component;"},"__N_SSG":true},"page":"/[[...id]]","query":{"id":["react","high-compoment"]},"buildId":"ntD6QUMlZQsl3mf9dMsvt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>