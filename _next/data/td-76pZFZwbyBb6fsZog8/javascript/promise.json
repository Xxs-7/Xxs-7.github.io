{"pageProps":{"toc":[{"text":"promise","hash":"#promise","depth":1},{"text":"API","hash":"#api","depth":2},{"text":"问题","hash":"#问题","depth":2},{"text":"Promise 会吃掉错误","hash":"#promise-会吃掉错误","depth":3},{"text":"异步的传染性","hash":"#异步的传染性","depth":3},{"text":"手写 promise","hash":"#手写-promise","depth":2},{"text":"应用场景","hash":"#应用场景","depth":2},{"text":"参考资料","hash":"#参考资料","depth":2}],"code":"var Component=(()=>{var a=Object.create;var l=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),P=(r,n)=>{for(var i in n)l(r,i,{get:n[i],enumerable:!0})},c=(r,n,i,s)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let o of m(n))!f.call(r,o)&&o!==i&&l(r,o,{get:()=>n[o],enumerable:!(s=u(n,o))||s.enumerable});return r};var j=(r,n,i)=>(i=r!=null?a(p(r)):{},c(n||!r||!r.__esModule?l(i,\"default\",{value:r,enumerable:!0}):i,r)),w=r=>c(l({},\"__esModule\",{value:!0}),r);var d=g((F,t)=>{t.exports=_jsx_runtime});var v={};P(v,{default:()=>x});var e=j(d());function h(r){let n=Object.assign({h1:\"h1\",h2:\"h2\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\",h3:\"h3\",strong:\"strong\",pre:\"pre\",blockquote:\"blockquote\",em:\"em\",ol:\"ol\",a:\"a\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{hash:\"promise\",children:\"promise\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"api\",children:\"API\"}),`\n`,(0,e.jsx)(n.p,{children:\"Promise\\u5B9E\\u4F8B\\u5177\\u6709\\u4E09\\u79CD\\u72B6\\u6001\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"pending \\u5F02\\u6B65\\u64CD\\u4F5C\\u672A\\u5B8C\\u6210\"}),`\n`,(0,e.jsx)(n.li,{children:\"fulfilled \\u5F02\\u6B65\\u64CD\\u4F5C\\u6210\\u529F\"}),`\n`,(0,e.jsx)(n.li,{children:\"rejected \\u5F02\\u6B65\\u64CD\\u4F5C\\u5931\\u8D25\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u4E09\\u79CD\\u72B6\\u6001\\u7684\\u53D8\\u5316\\u9014\\u5F84\\u53EA\\u6709\\u4E24\\u79CD\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4ECEpending \\u5230 fulfilled\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u4ECEpending \\u5230 rejected\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u51FD\\u6570\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.resolve\"}),\"\\uFF1A\\u8FD4\\u56DE\\u4E00\\u4E2A fulfilled \\u7684 Promise \\u5BF9\\u8C61\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.reject\"}),\"\\uFF1A\\u8FD4\\u56DE\\u4E00\\u4E2A rejected \\u7684 Promise \\u5BF9\\u8C61\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.then\"}),\"\\uFF1A\\u5236\\u5B9A promise \\u6267\\u884C\\u7ED3\\u679C\\u7684\\u51FD\\u6570\\uFF0C\\u5305\\u542B fulfilled \\u548C rejected\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.all\"}),\"\\uFF1A\\u5E76\\u884C\\u6267\\u884C\\u591A\\u4E2A promise\\uFF0C\\u5E76\\u7B49\\u5F85\\u6240\\u6709 promise \\u90FD\\u51C6\\u5907\\u5C31\\u7EEA\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.allSettled\"}),\"\\uFF1A\\u5982\\u679C\\u4EFB\\u610F\\u7684 promise reject\\uFF0C\\u5219\\xA0\",(0,e.jsx)(n.code,{children:\"Promise.all\"}),\"\\xA0\\u6574\\u4E2A\\u5C06\\u4F1A reject\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.race\"}),\"\\uFF1A\\u53EA\\u7B49\\u5F85\\u7B2C\\u4E00\\u4E2A settled \\u7684 promise \\u5E76\\u83B7\\u53D6\\u5176\\u7ED3\\u679C\\uFF08\\u6216 error\\uFF09\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"Promise.any\"}),\"\\u4E0E\\xA0\",(0,e.jsx)(n.code,{children:\"Promise.race\"}),\"\\xA0\\u7C7B\\u4F3C\\uFF0C\\u533A\\u522B\\u5728\\u4E8E\\xA0\",(0,e.jsx)(n.code,{children:\"Promise.any\"}),\"\\xA0\\u53EA\\u7B49\\u5F85\\u7B2C\\u4E00\\u4E2A fulfilled \\u7684 promise\\uFF0C\\u5E76\\u5C06\\u8FD9\\u4E2A fulfilled \\u7684 promise \\u8FD4\\u56DE\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u95EE\\u9898\",children:\"\\u95EE\\u9898\"}),`\n`,(0,e.jsx)(n.h3,{hash:\"promise-\\u4F1A\\u5403\\u6389\\u9519\\u8BEF\",children:(0,e.jsx)(n.strong,{children:\"Promise \\u4F1A\\u5403\\u6389\\u9519\\u8BEF\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\u6267\\u884C\\u4EE5\\u4E0B\\u4EE3\\u7801\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-tsx\",children:`const doAsyncThing = function () {\n  return new Promise(function (resolve, reject) {\n    // \\u4E0B\\u9762\\u4E00\\u884C\\u4F1A\\u62A5\\u9519\\uFF0C\\u56E0\\u4E3Ax\\u6CA1\\u6709\\u58F0\\u660E\n    throw new Error(\"test error\");\n  });\n};\n\ndoAsyncThing()\n\nsetTimeout(() => {\n  console.log(123);\n}, 2000);\n// Uncaught (in promise) Error: test error\n// 123\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E0A\\u9762\\u4EE3\\u7801\\u4E2D\\uFF0C\",(0,e.jsx)(n.code,{children:\"someAsyncThing()\"}),\"\\u51FD\\u6570\\u4EA7\\u751F\\u7684 Promise \\u5BF9\\u8C61\\uFF0C\\u5185\\u90E8\\u6709\\u8BED\\u6CD5\\u9519\\u8BEF\\uFF0C\\u6D4F\\u89C8\\u5668\\u4F1A\\u6253\\u5370\\u51FA\\u9519\\u8BEF\\u63D0\\u793A\",(0,e.jsx)(n.code,{children:\"ReferenceError: x is not defined\"}),\"\\uFF0C\\u4F46\\u662F\\u4E0D\\u4F1A\\u9000\\u51FA\\u8FDB\\u7A0B\\u3001\\u7EC8\\u6B62\\u811A\\u672C\\u6267\\u884C\\uFF0C2 \\u79D2\\u4E4B\\u540E\\u8FD8\\u662F\\u4F1A\\u8F93\\u51FA\",(0,e.jsx)(n.code,{children:\"123\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u962E\\u4E00\\u5CF0\\u7684 es6 \\u4E66\\u7C4D\\u4E2D\\u8BF4\\uFF1A\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"\\u8DDF\\u4F20\\u7EDF\\u7684\",(0,e.jsx)(n.code,{children:\"try/catch\"}),\"\\u4EE3\\u7801\\u5757\\u4E0D\\u540C\\u7684\\u662F\\uFF0C\\u5982\\u679C\\u6CA1\\u6709\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"catch()\"}),\"\\u65B9\\u6CD5\\u6307\\u5B9A\\u9519\\u8BEF\\u5904\\u7406\\u7684\\u56DE\\u8C03\\u51FD\\u6570\\uFF0CPromise \\u5BF9\\u8C61\\u629B\\u51FA\\u7684\\u9519\\u8BEF\\u4E0D\\u4F1A\\u4F20\\u9012\\u5230\\u5916\\u5C42\\u4EE3\\u7801\\uFF0C\\u5373\\u4E0D\\u4F1A\\u6709\\u4EFB\\u4F55\\u53CD\\u5E94\\u3002\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.em,{children:\"\\u629B\\u51FA\\u7684\\u9519\\u8BEF\\u4E0D\\u4F1A\\u4F20\\u9012\\u5230\\u5916\\u5C42\\u4EE3\\u7801\"}),\" \\u8FD9\\u53E5\\u8BDD\\u6362\\u6210\\u4EBA\\u8BDD\\u5C31\\u662F\\uFF1A\\u8BBE\\u7F6E \",(0,e.jsx)(n.code,{children:\"window.onerror\"}),\" \\u6355\\u83B7 \",(0,e.jsx)(n.code,{children:\"error\"}),\" \\uFF0C\\u662F\\u6355\\u83B7\\u4E0D\\u5230 promise \\u5185\\u90E8\\u629B\\u51FA\\u7684\\u9519\\u8BEF\\uFF0C\\u770B\\u4EE5\\u4E0B\\u4EE3\\u7801\\uFF0C\",(0,e.jsx)(n.code,{children:\"onerror\"}),\" \\u91CC\\u7684\\u6253\\u5370\\u5E76\\u672A\\u6267\\u884C\\uFF08\\u5373\\u6355\\u83B7\\u4E0D\\u5230 promise \\u5185\\u90E8 throw \\u7684 \",(0,e.jsx)(n.code,{children:\"error\"}),\"\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`window.onerror = function () {   // \\u6211\\u4EEC\\u6DFB\\u52A0\\u4E86 window \\u7684 onerror \\u5904\\u7406\\u51FD\\u6570\n    console.log('window err')\n} \n\npromise = new Promise(function(resolve, reject) {\n    throw new Error('test');\n});\npromise.then(function(value) { console.log(value) })   \n\n// \\u63A7\\u5236\\u53F0\\u8F93\\u51FA:\n// Uncaught (in promise) Error: test\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u52A0\\u4E86 catch\\uFF0C\\u662F\\u80FD\\u6355\\u83B7\\u5230\\u5185\\u90E8\\u7684\\u9519\\u8BEF\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`window.onerror = function () {\n    console.log('window err')\n} \n\nvar promise = new Promise(function(resolve, reject) {\n    throw new Error('test');\n});\n\npromise\n    .then(function(value) { console.log(value) })\n    .catch((err) => console.log('promise catch err'))\n\n// \\u63A7\\u5236\\u53F0\\u8F93\\u51FA:\n// promise catch err\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6709\\u4E9B\\u535A\\u5BA2\\u8BF4\\u5403\\u6389\\u9519\\u8BEF\\u662F\\u6307\\u4E0D\\u5F71\\u54CD\\u5168\\u5C40\\u4EE3\\u7801\\u7684\\u6267\\u884C\\uFF0C\\u8FD9\\u662F\\u8BEF\\u89E3\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u5B9E\\u9645\\u5E94\\u662F promise \\u5916\\u90E8\\u6355\\u83B7\\u4E0D\\u5230\\u5185\\u90E8\\u629B\\u51FA\\u7684\\u9519\\u8BEF\\u3002\"})]}),`\n`,(0,e.jsx)(n.p,{children:`\\u5728\\u6D4F\\u89C8\\u5668\\u4E2D\\uFF0C\\u786E\\u5B9E\\u4E0D\\u4F1A\\u5F71\\u54CD\\u5168\\u5C40\\u4EE3\\u7801\\u7684\\u6267\\u884C\\u3002\n\\u4F46\\u662F\\u5728 nodeJS \\u4E2D\\uFF0C\\u4F1A\\u5F71\\u54CD\\u5168\\u5C40\\u4EE3\\u7801\\u7684\\u6267\\u884C\\uFF0C\\u76F4\\u63A5 exit 0 \\u4E86\\uFF0C\\u5FC5\\u987B\\u8BBE\\u7F6E catch\\uFF0C\\u624D\\u4F1A\\u7EE7\\u7EED\\u6267\\u884C\\u3002`}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`const doAsyncThing = function () {\n  return new Promise(function (resolve, reject) {\n    // \\u4E0B\\u9762\\u4E00\\u884C\\u4F1A\\u62A5\\u9519\\uFF0C\\u56E0\\u4E3Ax\\u6CA1\\u6709\\u58F0\\u660E\n    throw new Error(\"test error\");\n  });\n};\n\ndoAsyncThing();\n\nsetTimeout(() => {\n  console.log(123);\n}, 2000);\n\n// \\u63A7\\u5236\\u53F0\\u8F93\\u51FA:\n// Error: test error\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u94FE\\u5F0F\\u8C03\\u7528 promise \\u65F6\\uFF0C\\u5199\\u4E0A catch \\u662F\\u4E00\\u4E2A\\u597D\\u4E60\\u60EF\\u3002\"}),`\n`,(0,e.jsx)(n.h3,{hash:\"\\u5F02\\u6B65\\u7684\\u4F20\\u67D3\\u6027\",children:\"\\u5F02\\u6B65\\u7684\\u4F20\\u67D3\\u6027\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u6709\\u4E24\\u79CD\\u8BF4\\u6CD5\\uFF0C\\u5747\\u51FA\\u73B0\\u5728\\u7528 \",(0,e.jsx)(n.code,{children:\"aysnc\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"await\"}),\" \\u65B9\\u5F0F\\u4F7F\\u7528 promise \\u65F6\\uFF0C\\u5373\\u5F02\\u6B65\\u8F6C\\u540C\\u6B65\\u7684\\u5199\\u6CD5\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"\\u5982\\u679C\\u540C\\u65F6\\u6267\\u884C\\u591A\\u4E2A\\u8FD4\\u56DE promise \\u7684\\u51FD\\u6570\\uFF0C\\u5E76\\u4E14\\u4E4B\\u95F4\\u5B58\\u5728\\u4F9D\\u8D56\\uFF0C\\u5373\\u4E0A\\u4E00\\u4E2A promise \\u7684\\u7ED3\\u679C\\u662F\\u4E0B\\u4E00\\u4E2A promise \\u7684\\u53C2\\u6570\\uFF0C\\u90A3\\u4E48\\u6240\\u6709 promise \\u7684\\u5C01\\u88C5\\u51FD\\u6570\\u5FC5\\u987B\\u90FD\\u5199\\u4E0A \",(0,e.jsx)(n.code,{children:\"async\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"await\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"\\u5982\\u679C\\u4E00\\u4E2A\\u5E95\\u5C42\\u51FD\\u6570\\u4F7F\\u7528\\u4E86 async\\uFF0C\\u90A3\\u4E48\\u6240\\u6709\\u57FA\\u4E8E\\u5B83\\u7684\\u6240\\u6709\\u8C03\\u7528\\u94FE\\u90FD\\u5FC5\\u987B\\u4F7F\\u7528 await \\u83B7\\u53D6\\u7ED3\\u679C\\uFF0C\\u6216\\u8005\\u4F7F\\u7528 .then()\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u624B\\u5199-promise\",children:\"\\u624B\\u5199 promise\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`const PENDING = \"PENDING\";\nconst FULFILLED = \"FULFILLED\";\nconst REJECTED = \"REJECTED\";\n\nclass MyPromsie {\n  constructor(executor) {\n    this.status = PENDING;\n    this.value = undefined;\n    this.reason = undefined;\n    this.onResolvedCallbacks = [];\n    this.onRejectedCallbacks = [];\n\n    let resolve = (value) => {\n      if (this.status == PENDING) {\n        this.status = FULFILLED;\n        this.value = value;\n        this.onResolvedCallbacks.forEach((fn) => fn());\n      }\n    };\n\n    let reject = (reason) => {\n      if (this.status == PENDING) {\n        this.status = REJECTED;\n        this.reason = reason;\n        this.onRejectedCallbacks.forEach((fn) => fn());\n      }\n    };\n\n    try {\n      executor(resolve, reject);\n    } catch (e) {\n      reject(error);\n    }\n  }\n\n  then(onFullfilled, onRejected) {\n    if (this.status == FULFILLED) {\n      onFullfilled(this.value);\n    }\n\n    if (this.status == REJECTED) {\n      onRejected(this.reason);\n    }\n\n    if (this.status === PENDING) {\n      // \\u5982\\u679Cpromise\\u7684\\u72B6\\u6001\\u662F pending\\uFF0C\\u9700\\u8981\\u5C06 onFulfilled \\u548C onRejected \\u51FD\\u6570\\u5B58\\u653E\\u8D77\\u6765\\uFF0C\\u7B49\\u5F85\\u72B6\\u6001\\u786E\\u5B9A\\u540E\\uFF0C\\u518D\\u4F9D\\u6B21\\u5C06\\u5BF9\\u5E94\\u7684\\u51FD\\u6570\\u6267\\u884C\n      this.onResolvedCallbacks.push(() => {\n        onFullfilled(this.value);\n      });\n\n      // \\u5982\\u679Cpromise\\u7684\\u72B6\\u6001\\u662F pending\\uFF0C\\u9700\\u8981\\u5C06 onFulfilled \\u548C onRejected \\u51FD\\u6570\\u5B58\\u653E\\u8D77\\u6765\\uFF0C\\u7B49\\u5F85\\u72B6\\u6001\\u786E\\u5B9A\\u540E\\uFF0C\\u518D\\u4F9D\\u6B21\\u5C06\\u5BF9\\u5E94\\u7684\\u51FD\\u6570\\u6267\\u884C\n      this.onRejectedCallbacks.push(() => {\n        onRejected(this.reason);\n      });\n    }\n  }\n}\n\nlet p1 = new MyPromsie((res) => {\n  setTimeout(() => {\n    res(\"ok\");\n  }, 1000);\n});\np1.then((res) => {\n  console.log(\"then\", res);\n});\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u5E94\\u7528\\u573A\\u666F\",children:\"\\u5E94\\u7528\\u573A\\u666F\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5728\\u8BBF\\u95EE\\u63A5\\u53E3\\u7684\\u65F6\\u5019\\uFF0C\\u9700\\u8981\\u6709\\u8FC7\\u6E21\\u52A8\\u753B\\uFF0C\\u5B9E\\u73B0\\u4E00\\u4E2A\\u9700\\u6C42\\uFF0C\\u5982\\u679C\\u63A5\\u53E3\\u5728\\u534A\\u79D2\\u5185\\u54CD\\u5E94\\u5B8C\\u6BD5\\uFF0C\\u53EA\\u663E\\u793A\\u534A\\u79D2\\u7684\\u8FC7\\u6E21\\u52A8\\u753B\\uFF0C\\u82E5\\u8D85\\u8FC7\\uFF0C\\u5219\\u7B49\\u5230\\u63A5\\u53E3\\u54CD\\u5E94\\u5B8C\\u6BD5\\u518D\\u5173\\u95ED\\u52A8\\u753B\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`function API() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve();\n    }, 5000);\n  });\n}\n\nlet loadTime = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve();\n    }, 500);\n  });\n};\n\nfunction wrapFun(request) {\n  return Promise.allSettled([loadTime(), request()]);\n}\n\nwrapFun(API).then(() => {\n  console.log(\"ok\");\n});\n`})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u5B9E\\u73B0\\u6700\\u591A 5 \\u4E2A\\u63A5\\u53E3\\u5E76\\u884C\\u8BF7\\u6C42\\u3002\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`function API() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve(\"ok\");\n    }, 1000);\n  });\n}\n\nlet i = 0;\nlet arr = new Array(20).fill(0);\n\nfunction limitLoad(requests, limit) {\n  const promises = requests.slice(0, limit).map((item, index) => {\n    return API().then(() => index);\n  });\n\n  return requests\n    .reduce((pre, cur, index) => {\n      if (index < limit) {\n        return pre;\n      }\n      return pre\n        .then(() => Promise.race(promises))\n        .catch((err) => console.error(err))\n        .then((idx) => {\n          console.log(\n            \\`\\u7B2C\\${idx}\\u4E2A\\u4F4D\\u7F6E\\u7684\\u8BF7\\u6C42\\u7ED3\\u675F\\uFF0C\\u5C06\\u7B2C\\${index}\\u4E2A\\u63A5\\u53E3\\u653E\\u5165,\\u5171\\${requests.length}\\u4E2A\\u8BF7\\u6C42\\`\n          );\n          promises[idx] = pro().then(() => idx);\n        });\n    }, Promise.resolve())\n    .then(() => Promise.all(promises));\n}\n\nlimitLoad(arr, 5);\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u53C2\\u8003\\u8D44\\u6599\",children:\"\\u53C2\\u8003\\u8D44\\u6599\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://zh.javascript.info/promise-api\",children:\"Promise API\"})})]})}function E(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(h,r)})):h(r)}var x=E;return w(v);})();\n;return Component;"},"__N_SSG":true}