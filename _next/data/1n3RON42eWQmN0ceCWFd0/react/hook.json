{"pageProps":{"toc":[{"text":"hook","hash":"#hook","depth":1},{"text":"为什么引入 hook","hash":"#为什么引入-hook","depth":2},{"text":"useState","hash":"#usestate","depth":2},{"text":"useEffect","hash":"#useeffect","depth":2},{"text":"依赖项","hash":"#依赖项","depth":3},{"text":"useRef","hash":"#useref","depth":2},{"text":"用法","hash":"#用法","depth":3},{"text":"useContext","hash":"#usecontext","depth":2},{"text":"useMemo","hash":"#usememo","depth":2},{"text":"useCallback","hash":"#usecallback","depth":2},{"text":"useTransition","hash":"#usetransition","depth":2},{"text":"useDeferredValue","hash":"#usedeferredvalue","depth":2},{"text":"useSyncExternalStorePage","hash":"#usesyncexternalstorepage","depth":2},{"text":"自定义 Hook","hash":"#自定义-hook","depth":2},{"text":"参考资料","hash":"#参考资料","depth":1}],"code":"var Component=(()=>{var a=Object.create;var l=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var S=(r,n)=>()=>(n||r((n={exports:{}}).exports,n),n.exports),v=(r,n)=>{for(var t in n)l(r,t,{get:n[t],enumerable:!0})},o=(r,n,t,i)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of f(n))!g.call(r,c)&&c!==t&&l(r,c,{get:()=>n[c],enumerable:!(i=u(n,c))||i.enumerable});return r};var x=(r,n,t)=>(t=r!=null?a(p(r)):{},o(n||!r||!r.__esModule?l(t,\"default\",{value:r,enumerable:!0}):t,r)),m=r=>o(l({},\"__esModule\",{value:!0}),r);var d=S((k,s)=>{s.exports=_jsx_runtime});var C={};v(C,{default:()=>b});var e=x(d());function h(r){let n=Object.assign({h1:\"h1\",p:\"p\",h2:\"h2\",ul:\"ul\",li:\"li\",code:\"code\",pre:\"pre\",strong:\"strong\",h3:\"h3\",ol:\"ol\",a:\"a\"},r.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{hash:\"hook\",children:\"hook\"}),`\n`,(0,e.jsx)(n.p,{children:\"Hook \\u662F React 16.8 \\u7684\\u65B0\\u589E\\u7279\\u6027\\uFF0C\\u4F7F\\u5F97\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E5F\\u80FD\\u50CF\\u7C7B\\u7EC4\\u4EF6\\u4F7F\\u7528 props \\u548C state \\u7B49\\u7279\\u6027\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u4E3A\\u4EC0\\u4E48\\u5F15\\u5165-hook\",children:\"\\u4E3A\\u4EC0\\u4E48\\u5F15\\u5165 hook\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u89E3\\u51B3\\u957F\\u65F6\\u95F4\\u4F7F\\u7528\\u548C\\u7EF4\\u62A4 react \\u8FC7\\u7A0B\\u4E2D\\u9047\\u5230\\u7684\\u95EE\\u9898\\uFF1A\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u96BE\\u4EE5\\u91CD\\u7528\\u548C\\u5171\\u4EAB\\u7EC4\\u4EF6\\u4E2D\\u7684\\u4E0E\\u72B6\\u6001\\u76F8\\u5173\\u7684\\u903B\\u8F91\\uFF1B\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u903B\\u8F91\\u590D\\u6742\\u7684\\u7EC4\\u4EF6\\u53D8\\u5F97\\u96BE\\u4EE5\\u5F00\\u53D1\\u548C\\u7EF4\\u62A4\\uFF0C\\u5F53\\u6211\\u4EEC\\u7684\\u7EC4\\u4EF6\\u9700\\u8981\\u5904\\u7406\\u4E2A\\u4E0D\\u76F8\\u5173\\u7684\\u591A\\u4E2A local state \\u65F6\\uFF0C\\u6BCF\\u4E2A\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\\u4E2D\\u53EF\\u80FD\\u5305\\u542B\\u5404\\u79CD\\u4E92\\u4E0D\\u76F8\\u5173\\u7684\\u903B\\u8F91\\u5728\\u91CC\\u9762\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7C7B\\u7EC4\\u4EF6\\u7684 this \\u589E\\u52A0\\u5B66\\u4E60\\u6210\\u672C\\uFF0C\\u7C7B\\u7EC4\\u4EF6\\u5728\\u57FA\\u4E8E\\u73B0\\u6709\\u5DE5\\u5177\\u4E0A\\u7684\\u4F18\\u5316\\u5B58\\u5728\\u5B58\\u5728\\u4E9B\\u8BB8\\u95EE\\u9898\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\u7531\\u4E8E\\u4E1A\\u52A1\\u6539\\u52A8\\uFF0C\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E0D\\u5F97\\u4E0D\\u6539\\u53D8\\u4E3A\\u7C7B\\u7EC4\\u4EF6\\u7B49\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56E0\\u6B64\\uFF0C\\u73B0\\u5728\\u7684\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E5F\\u53EF\\u4EE5\\u662F\\u6709\\u72B6\\u6001\\u7684\\u7EC4\\u4EF6\\uFF0C\\u5185\\u90E8\\u4E5F\\u53EF\\u4EE5\\u7EF4\\u62A4\\u81EA\\u8EAB\\u7684\\u72B6\\u6001\\u4EE5\\u53CA\\u505A\\u4E00\\u4E9B\\u903B\\u8F91\\u65B9\\u9762\\u7684\\u5904\\u7406\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"usestate\",children:(0,e.jsx)(n.code,{children:\"useState\"})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u8981\\u5728\\u5FAA\\u73AF\\u3001\\u6761\\u4EF6\\u5224\\u65AD\\u6216\\u8005\\u5B50\\u51FD\\u6570\\u4E2D\\u8C03\\u7528 useState?\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"useeffect\",children:(0,e.jsx)(n.code,{children:\"useEffect\"})}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-JS\",children:`useEffect(() => {\n  // \\u7EC4\\u4EF6\\u6E32\\u67D3\\u540E\\u6267\\u884C\n\n  return () => {\n    // \\u7EC4\\u4EF6\\u5378\\u8F7D\\u540E\\u6267\\u884C\n  }\n},[])\n`})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[(0,e.jsx)(n.code,{children:\"useEffect\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"useLayoutEffect\"}),\" \\u7684\\u533A\\u522B\"]})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"useEffect\"}),\"\\xA0\\u662F\\u5728 react \",(0,e.jsx)(n.strong,{children:\"\\u5B8C\\u6210\\u7EC4\\u4EF6\\u6E32\\u67D3\\u4E4B\\u540E\"}),\"\\uFF0C \",(0,e.jsx)(n.strong,{children:\"\\u5F02\\u6B65\\u6267\\u884C\"}),\" \\u7684\\uFF0C\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"useLayoutEffect\"}),\"\\xA0\\u662F\\u5728 react \\u628A \",(0,e.jsx)(n.strong,{children:\"\\u7EC4\\u4EF6\\uFF08\\u66F4\\u65B0\\uFF09\\u771F\\u6B63\\u6E32\\u67D3\\u5230\\u754C\\u9762\\u4E4B\\u524D\"}),\"\\uFF0C\",(0,e.jsx)(n.strong,{children:\"\\u540C\\u6B65\\u6267\\u884C\"}),\"\\u7684\\u3002\\u548C\\xA0\",(0,e.jsx)(n.code,{children:\"componentDidMount\"}),\"\\xA0\\u7B49\\u4EF7\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.code,{children:\"useInsertionEffect\"})})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"useInsertionEffect\"}),\" \\u6267\\u884C\\u65F6\\u673A\\u6BD4 \",(0,e.jsx)(n.code,{children:\"useLayoutEffect\"}),\" \\u8FD8\\u524D\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u672C\\u8D28\\u4E0A \",(0,e.jsx)(n.code,{children:\"useInsertionEffect\"}),\" \\u4E3B\\u8981\\u662F\\u89E3\\u51B3 CSS-in-JS \\u5728\\u6E32\\u67D3\\u4E2D\\u6CE8\\u5165\\u6837\\u5F0F\\u7684\\u6027\\u80FD\\u95EE\\u9898\\u3002\\u8FD9\\u4E2A hooks \\u4E3B\\u8981\\u662F\\u5E94\\u7528\\u4E8E\\u8FD9\\u4E2A\\u573A\\u666F\\uFF0C\\u5728\\u5176\\u4ED6\\u573A\\u666F\\u4E0B React \\u4E0D\\u671F\\u671B\\u7528\\u8FD9\\u4E2A hooks \\u3002\"]}),`\n`,(0,e.jsx)(n.h3,{hash:\"\\u4F9D\\u8D56\\u9879\",children:\"\\u4F9D\\u8D56\\u9879\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\" \"}),\" \\u7A7A\\u503C\\uFF1A\\u4E0D\\u4F20\\u9012\\u4F9D\\u8D56\\u9879\\u6570\\u7EC4\\u5C06\\u5728\\u6BCF\\u6B21 DOM \\u66F4\\u65B0\\u65F6\\u8FD0\\u884C\\u56DE\\u8C03\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"[]\"}),\": \\u9996\\u6B21\\u6E32\\u67D3\\u65F6\\u6267\\u884C\\uFF0C\\u540E\\u7EED\\u66F4\\u65B0\\u4E0D\\u6267\\u884C\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"[dep1, dep2,...]\"}),\": \\u4F9D\\u8D56\\u9879\\u6D45\\u6BD4\\u8F83\\uFF0C\\u65B0\\u65E7\\u4E0D\\u4E00\\u81F4\\u65F6\\u6267\\u884C\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.h2,{hash:\"useref\",children:(0,e.jsx)(n.code,{children:\"useRef\"})}),`\n`,(0,e.jsx)(n.h3,{hash:\"\\u7528\\u6CD5\",children:\"\\u7528\\u6CD5\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u4FDD\\u5B58\\u771F\\u5B9E dom \\u8282\\u70B9\\u7684\\u5F15\\u7528\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u901A\\u8FC7\",(0,e.jsx)(n.code,{children:\"ref.current\"}),\"\\u5C5E\\u6027\\u8BBF\\u95EE\\u8FD9\\u4E2A\\xA0\",(0,e.jsx)(n.code,{children:\"ref\"}),\"\\u7684\\u5F53\\u524D\\u53D8\\u91CF\\uFF0C\\u8FD9\\u4E2A\\u53D8\\u91CF\\u662F\\u6709\\u610F\\u8BBE\\u7F6E\\u4E3A\\u53EF\\u53D8\\u7684\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E3A\\u4EC0\\u4E48\\u53EA\\u8981\\u628A\",(0,e.jsx)(n.code,{children:\"ref\"}),`\\u6302\\u5230\\u67D0\\u4E2Areact\\u5143\\u7D20\\u4E0A\\uFF0C\\u5C31\\u53EF\\u4EE5\\u62FF\\u5230\\u5B83\\u7684dom\\uFF1F\n\\u6E90\\u7801\\u662F\\u5982\\u4F55\\u5C06 dom \\u8282\\u70B9\\u6302\\u5230 ref.current \\u4E0A\\u7684\\uFF1F`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-JS\",children:`function TextInputWithFocusButton() {\n  const inputEl = useRef(null);\n  const onButtonClick = () => {\n    // \\`current\\` \\u6307\\u5411\\u5DF2\\u6302\\u8F7D\\u5230 DOM \\u4E0A\\u7684\\u6587\\u672C\\u8F93\\u5165\\u5143\\u7D20\n    inputEl.current.focus();\n  };\n  return (\n    <>\n      <input ref={inputEl} type=\"text\" />\n      <button onClick={onButtonClick}>Focus the input</button>\n    </>\n  );\n}\n\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"2.\\u5B58\\u53D8\\u91CF\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`function Timer() {\n  const intervalRef = useRef();\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      // ...\n    });\n    intervalRef.current = id;\n    return () => {\n      clearInterval(intervalRef.current);\n    };\n  });\n\n  // ...\n}\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u5C06 current \\u663E\\u793A\\u5230\\u7EC4\\u4EF6\\u4E0A\\uFF0C\\u53EA\\u53D8\\u66F4 current \\u7684\\u503C\\u4E0D\\u4F1A\\u89E6\\u53D1\\u91CD\\u65B0\\u6E32\\u67D3\\uFF0C\\u5373 current \\u88AB\\u4FEE\\u6539\\u4E86\\u503C\\uFF0C\\u663E\\u793A\\u7684\\u5185\\u5BB9\\u4F9D\\u7136\\u4F1A\\u662F\\u65E7\\u6570\\u636E\\u3002\\u53EA\\u5728\\u89E6\\u53D1\\u91CD\\u65B0\\u6E32\\u67D3\\uFF08state,prop\\u53D8\\u66F4)\\u65F6\\u88AB\\u7EC4\\u4EF6\\u663E\\u793A\\u5185\\u5BB9\\u624D\\u4F1A\\u88AB\\u5237\\u65B0\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"createRef\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"useRef\"})]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"createRef \\u6BCF\\u6B21\\u6E32\\u67D3\\u90FD\\u4F1A\\u8FD4\\u56DE\\u4E00\\u4E2A\\u65B0\\u7684\\u5F15\\u7528\\uFF0C\\u800C useRef \\u6BCF\\u6B21\\u90FD\\u4F1A\\u8FD4\\u56DE\\u76F8\\u540C\\u7684\\u5F15\\u7528\\u3002\"})}),`\n`,(0,e.jsx)(n.p,{children:\"createRef \\u53EF\\u4EE5\\u5728\\u7C7B\\u7EC4\\u4EF6\\u4E2D\\u4F7F\\u7528\\uFF0CuseRef \\u53EA\\u80FD\\u5728\\u51FD\\u6570\\u7EC4\\u4EF6\\u4E2D\\u4F7F\\u7528\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{hash:\"usecontext\",children:\"useContext\"}),`\n`,(0,e.jsxs)(n.p,{children:[`\\u7528\\u4E8E\\u8DE8\\u7EC4\\u4EF6\\uFF08\\u7236\\u5B50\\u5B59\\uFF09\\u4F20\\u503C\\u7684\\u4E00\\u79CD\\u65B9\\u5F0F\\u3002\n\\u5D4C\\u5957\\u4F7F\\u7528 `,(0,e.jsx)(n.code,{children:\"useContext\"}),\"\\uFF0C\\u67E5\\u627E key \\u503C\\u7684\\u65B9\\u5F0F\\u5E94\\u8BE5\\u662F\\u5C31\\u8FD1\\u539F\\u5219\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-JS\",children:`import React, { createContext, useContext } from \"react\";\n\nconst context = createContext();\n\nexport default function index() {\n  return (\n    <div>\n      <h3>Context test</h3>\n      <context.Provider value={{ value: 1 }}>\n        <Child1 />\n      </context.Provider>\n    </div>\n  );\n}\n\nfunction Child1() {\n  const { value } = useContext(context);\n  return (\n    <div>\n      child1:{value}\n      <Child2 />\n    </div>\n  );\n}\n\nfunction Child2() {\n  return (\n    <context.Provider value={{ value: 3 }}>\n      <Child3 />\n    </context.Provider>\n  );\n}\n\nfunction Child3() {\n  const { value } = useContext(context);\n  return <div>child3:{value}</div>;\n}\n\n// Context test\n// child1:1\n// child3:3\n\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"usememo\",children:\"useMemo\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7F13\\u5B58\\u9700\\u8981\\u7ECF\\u8FC7\\u5927\\u91CF\\u8BA1\\u7B97\\u7684\\u503C\\uFF0C\\u907F\\u514D\\u53D8\\u91CF\\u4F5C\\u4E3A \",(0,e.jsx)(n.code,{children:\"prop\"}),\" \\u65F6\\u91CD\\u65B0\\u8D4B\\u503C\\u5BFC\\u81F4\\u5B50\\u7EC4\\u4EF6\\u53D1\\u751F\\u591A\\u4F59\\u7684\\u91CD\\u65B0\\u6E32\\u67D3\"]}),`\n`,(0,e.jsx)(n.h2,{hash:\"usecallback\",children:\"useCallback\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u7F13\\u5B58\\u51FD\\u6570\\u5730\\u5740\\uFF0C\\u907F\\u514D\\u51FD\\u6570\\u4F5C\\u4E3A \",(0,e.jsx)(n.code,{children:\"prop\"}),\" \\u65F6\\u91CD\\u65B0\\u8D4B\\u503C\\u5BFC\\u81F4\\u5B50\\u7EC4\\u4EF6\\u53D1\\u751F\\u591A\\u4F59\\u7684\\u91CD\\u65B0\\u6E32\\u67D3\"]}),`\n`,(0,e.jsx)(n.h2,{hash:\"usetransition\",children:\"useTransition\"}),`\n`,(0,e.jsx)(n.p,{children:\"react 18 \\u628A update \\u5206\\u4E3A\\u4E24\\u79CD\\u7C7B\\u578B\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Urgent updates\"}),\"\\xA0\\u7D27\\u6025\\u66F4\\u65B0\\uFF0C\\u6307\\u76F4\\u63A5\\u4EA4\\u4E92\\uFF0C\\u901A\\u5E38\\u6307\\u7684\\u7528\\u6237\\u4EA4\\u4E92\\u3002\\u5982\\u70B9\\u51FB\\u3001\\u8F93\\u5165\\u7B49\\u3002\\u8FD9\\u79CD\\u66F4\\u65B0\\u4E00\\u65E6\\u4E0D\\u53CA\\u65F6\\uFF0C\\u7528\\u6237\\u5C31\\u4F1A\\u89C9\\u5F97\\u54EA\\u91CC\\u4E0D\\u5BF9\\u3002\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Transition updates\"}),\"\\xA0\\u8FC7\\u6E21\\u66F4\\u65B0\\uFF0C\\u5982UI\\u4ECE\\u4E00\\u4E2A\\u89C6\\u56FE\\u5411\\u53E6\\u4E00\\u4E2A\\u89C6\\u56FE\\u7684\\u66F4\\u65B0\\u3002\\u901A\\u5E38\\u8FD9\\u79CD\\u66F4\\u65B0\\u7528\\u6237\\u5E76\\u4E0D\\u7740\\u6025\\u770B\\u5230\\u3002\"]}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`function TransitionPage() {\n  const [isPending, setStartTransition] = useTransition();\n  return (\n    <div>\n      <h3>TransitionPage</h3>\n\n      <button\n        disabled={isPending}\n        onClick={() => setStartTransition(() => setresource(fetchData()))}\n      >\n        click\n      </button>\n    </div>\n  );\n}\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"usedeferredvalue\",children:\"useDeferredValue\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5EF6\\u8FDF\\u66F4\\u65B0 UI \\u7684\\u67D0\\u4E9B\\u90E8\\u5206\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528 query \\u7684\\u7EC4\\u4EF6\\u66F4\\u65B0\\u4F18\\u5148\\u6E32\\u67D3\\uFF0C\\u4F7F\\u7528 deferredQuery \\u7684\\u7EC4\\u4EF6\\u66F4\\u65B0\\u5EF6\\u8FDF\\u6E32\\u67D3\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`import { useState, useDeferredValue } from 'react';\n\nfunction SearchPage() {\n  const [query, setQuery] = useState('');\n  const deferredQuery = useDeferredValue(query);\n  // ...\n}\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u7ED3\\u5408 suspend \\u7EC4\\u4EF6\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`import { Suspense, useState, useDeferredValue } from 'react';\nimport SearchResults from './SearchResults.js';\n\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const deferredQuery = useDeferredValue(query);\n  // isStale \\u8868\\u793A\\u5F53\\u524D\\u663E\\u793A\\u7684\\u5185\\u5BB9\\u662F\\u5426\\u8FC7\\u65F6\n  const isStale = query !== deferredQuery;\n  return (\n    <>\n      <label>\n        Search albums:\n        <input value={query} onChange={e => setQuery(e.target.value)} />\n      </label>\n      <Suspense fallback={<h2>Loading...</h2>}>\n        <div style={{\n          opacity: isStale ? 0.5 : 1,\n          transition: isStale ? 'opacity 0.2s 0.2s linear' : 'opacity 0s 0s linear'\n        }}>\n          <SearchResults query={deferredQuery} />\n        </div>\n      </Suspense>\n    </>\n  );\n}\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"usesyncexternalstorepage\",children:\"useSyncExternalStorePage\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8BA2\\u9605\\u5916\\u90E8\\u6570\\u636E\\u6E90\\uFF08store\\u3001\\u4E8B\\u4EF6\\uFF09\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u76D1\\u542C\\u7F51\\u7EDC\\u5728\\u7EBF\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`function subscrbe(callback) {\n  window.addEventListener(\"online\", callback);\n  window.addEventListener(\"offline\", callback);\n  return () => {\n    window.removeEventListener(\"online\", callback);\n    window.removeEventListener(\"offline\", callback);\n  };\n}\n\nfunction useOnlineStatus() {\n  return useSyncExternalStore(\n    subscrbe,\n    () => navigator.onLine,\n    () => true\n  );\n}\n\nexport default function UseSyncExternalStorePage() {\n  const isOnline = useOnlineStatus();\n  // console.log(\"isOnline\", isOnline);\n  return <div>isOnline:{isOnline.toString()}</div>;\n}\n\n`})}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u76D1\\u542C\\u8DEF\\u7531\\u53D8\\u66F4\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`function useHistorySelector(selector) {\n  const history = useHistory();\n  return useSyncExternalStore(history.listen, () => selector(history));\n}\n`})}),`\n`,(0,e.jsxs)(n.ol,{start:\"3\",children:[`\n`,(0,e.jsx)(n.li,{children:\"\\u76D1\\u542C\\u9875\\u9762\\u6EDA\\u52A8\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`import { useSyncExternalStore } from \"react\";\n\nfunction subscribe(onStoreChange) {\n  global.window?.addEventListener(\"scroll\", onStoreChange);\n  return () => global.window?.removeEventListener(\"scroll\", onStoreChange);\n}\nfunction useScrollY(getY = (id) => id) {\n  return useSyncExternalStore(\n    subscribe,\n    () => getY(global.window?.scrollY),\n    () => undefined\n  );\n}\n\nexport default function useSyncExternalStorePage() {\n  const scrollY = useScrollY();\n\n  return (\n    <>\n      {Array.from({ length: 100 }).map((value, index) => {\n        return <p key={index}>\\u5360\\u4F4D\\u7B26</p>;\n      })}\n      <div style={{ position: \"fixed\", bottom: \"0px\", right: \"0px\" }}>\n        <div>{scrollY}</div>\n      </div>\n    </>\n  );\n}\n`})}),`\n`,(0,e.jsx)(n.h2,{hash:\"\\u81EA\\u5B9A\\u4E49-hook\",children:\"\\u81EA\\u5B9A\\u4E49 Hook\"}),`\n`,(0,e.jsx)(n.h1,{hash:\"\\u53C2\\u8003\\u8D44\\u6599\",children:\"\\u53C2\\u8003\\u8D44\\u6599\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://zh-hans.legacy.reactjs.org/docs/hooks-reference.html\",children:\"https://zh-hans.legacy.reactjs.org/docs/hooks-reference.html\"})})]})}function y(r={}){let{wrapper:n}=r.components||{};return n?(0,e.jsx)(n,Object.assign({},r,{children:(0,e.jsx)(h,r)})):h(r)}var b=y;return m(C);})();\n;return Component;"},"__N_SSG":true}