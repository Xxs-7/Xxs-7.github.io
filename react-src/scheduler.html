<!DOCTYPE html><html lang="cn"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/media/62122003a050e1bd-s.p.ttf" as="font" type="font/ttf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/aceb6d5e7704f218-s.p.ttf" as="font" type="font/ttf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/ae31b57542b06250.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ae31b57542b06250.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-38cee4c0e358b1a3.js" defer=""></script><script src="/_next/static/chunks/framework-6698976aa0ea586d.js" defer=""></script><script src="/_next/static/chunks/main-9ca4f46f71f15dad.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a08fec001b3e2b97.js" defer=""></script><script src="/_next/static/chunks/7a7c95a0-ab903f899792323b.js" defer=""></script><script src="/_next/static/chunks/581-340f217658a3c725.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...id%5D%5D-9e513b1713de17be.js" defer=""></script><script src="/_next/static/1n3RON42eWQmN0ceCWFd0/_buildManifest.js" defer=""></script><script src="/_next/static/1n3RON42eWQmN0ceCWFd0/_ssgManifest.js" defer=""></script></head><body class=" bg-light text-light-text dark:bg-dark dark:text-dark-text max-sm:text-sm"><script>
                (function () {
                  function setTheme(newTheme) {
                    window.__theme = newTheme;
                    if (newTheme === 'dark') {
                      document.documentElement.classList.add('dark');
                    } else if (newTheme === 'light') {
                      document.documentElement.classList.remove('dark');
                    }
                  }

                  var preferredTheme;
                  try {
                    preferredTheme = localStorage.getItem('theme');
                  } catch (err) { }

                  window.__setPreferredTheme = function(newTheme) {
                    preferredTheme = newTheme;
                    setTheme(newTheme);
                    try {
                      localStorage.setItem('theme', newTheme);
                    } catch (err) { }
                  };

                  var initialTheme = preferredTheme;
                  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

                  if (!initialTheme) {
                    initialTheme = darkQuery.matches ? 'dark' : 'light';
                  }
                  setTheme(initialTheme);

                  darkQuery.addEventListener('change', function (e) {
                    if (!preferredTheme) {
                      setTheme(e.matches ? 'dark' : 'light');
                    }
                  });
                })();
              </script><div id="__next"><div class="__className_118c38"><header class="w-full fixed t-0 h-14 border-b backdrop-blur border-slate-900/10 dark:border-slate-300/10 z-10"><div class="w-full h-full flex flex-row items-center justify-between px-4"><div>BLOG</div><div class="p-1 mr-2 flex flex-row rounded-full items-center justify-between hover:bg-dark/5 hover:dark:bg-light/5"><button class="block dark:hidden" type="button" aria-label="Use Dark Mode"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" stroke="currentColor"><title>moon</title><path fill="currentColor" d="M15.505 16.496c-1.97-1.971-2.499-4.819-1.626-7.284-0.953 0.337-1.854 0.865-2.616 1.626-2.734 2.734-2.734 7.167 0 9.9 2.733 2.733 7.164 2.735 9.898 0 0.764-0.762 1.29-1.663 1.626-2.616-2.463 0.872-5.312 0.344-7.283-1.626z"></path></svg></button><button type="button" class="hidden dark:block" aria-label="Use Light Mode"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" stroke="currentColor"><title>sun</title><path fill="currentColor" d="M16 9c-3.859 0-7 3.141-7 7s3.141 7 7 7 7-3.141 7-7c0-3.859-3.141-7-7-7zM16 21c-2.762 0-5-2.238-5-5s2.238-5 5-5 5 2.238 5 5-2.238 5-5 5zM16 7c0.552 0 1-0.448 1-1v-2c0-0.552-0.448-1-1-1s-1 0.448-1 1v2c0 0.552 0.448 1 1 1zM16 25c-0.552 0-1 0.448-1 1v2c0 0.552 0.448 1 1 1s1-0.448 1-1v-2c0-0.552-0.448-1-1-1zM23.777 9.635l1.414-1.414c0.391-0.391 0.391-1.023 0-1.414s-1.023-0.391-1.414 0l-1.414 1.414c-0.391 0.391-0.391 1.023 0 1.414s1.023 0.391 1.414 0zM8.223 22.365l-1.414 1.414c-0.391 0.391-0.391 1.023 0 1.414s1.023 0.391 1.414 0l1.414-1.414c0.391-0.392 0.391-1.023 0-1.414s-1.023-0.392-1.414 0zM7 16c0-0.552-0.448-1-1-1h-2c-0.552 0-1 0.448-1 1s0.448 1 1 1h2c0.552 0 1-0.448 1-1zM28 15h-2c-0.552 0-1 0.448-1 1s0.448 1 1 1h2c0.552 0 1-0.448 1-1s-0.448-1-1-1zM8.221 9.635c0.391 0.391 1.024 0.391 1.414 0s0.391-1.023 0-1.414l-1.414-1.414c-0.391-0.391-1.023-0.391-1.414 0s-0.391 1.023 0 1.414l1.414 1.414zM23.779 22.363c-0.392-0.391-1.023-0.391-1.414 0s-0.392 1.023 0 1.414l1.414 1.414c0.391 0.391 1.023 0.391 1.414 0s0.391-1.023 0-1.414l-1.414-1.414z"></path></svg></button></div></div></header><div class="pt-14 flex max-w-screen overflow-y-scroll"><nav class="hidden lg:block fixed top-14 lg:bottom-0 lg:h-screen w-[18rem] pb-10 px-4 overflow-y-auto min-h-screen z-10"><nav><ul class="mt-6"><!--$--><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold hover:bg-hover text-lg"><a class="block" href="/html">html</a></div><ul><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/html/SemanticsTag">语义化标签</a></li><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/html/anchor">锚元素</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold hover:bg-hover text-lg"><a class="block" href="/css">css</a></div><ul><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/css/flex">flex 布局</a></li><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/css/grid">grid 布局</a></li><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/css/unit">布局单位</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold hover:bg-hover text-lg"><a class="block" href="/react">react</a></div><ul><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/react/lifecycle">lifecycle</a></li><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/react/hook">hook</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold hover:bg-hover text-lg"><a class="block" href="/react-src">react 源码</a></div><ul><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/react-src/fiber">fiber</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold hover:bg-hover text-lg"><a class="block" href="/demo">代码实例</a></div><ul><li class="pl-2 border border-transparent rounded-sm font-bold hover:bg-hover text-sm py-0.5"><a class="block" href="/demo/music-player">音乐播放器</a></li></ul></li><!--/$--></ul></nav></nav><main class="relative lg:ml-[18rem] min-w-0 flex-1 px-5 "><article class="mx-auto xl:max-w-none overflow-x-hidden xl:ml-0 xl:mr-[18rem]"><h1 class="mdx-heading text-3xl font-extrabold my-6 text-header dark:text-header-dark" id="scheduler">scheduler</h1>
<p class="whitespace-pre-wrap my-2 ">scheduler 实际和 react 的组件渲染的代码是独立的，scheduler 它是一种通用设计，只负责调度，和处理具体渲染的代码无关。</p>
<p class="whitespace-pre-wrap my-2 ">在源码中 Scheduler 是 react 单独实现的任务调度库。它也可以实现在浏览器空闲时执行任务，而且还可以设置任务的优先级，高优先级任务先执行，低优先级任务后执行。 Scheduler 存储在 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">packages/scheduler</code> 文件夹中。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="通过浏览器空闲时间执行任务">通过浏览器空闲时间执行任务<a href="#通过浏览器空闲时间执行任务" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">不是利用 JS 主线程而是通过浏览器空闲时间执行任务，可以提高页面的响应性，高效的利用浏览器性能。利用浏览器的任务队列，可以实现这一目标。</p>
<p class="whitespace-pre-wrap my-2 ">react 使用了 messageChannel 的方案，将更新渲染任务作为宏任务，来让渡主线程。</p>
<pre><!--$--><div class="prism-code language-javascript rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// react/packages/scheduler/src/forks/Scheduler.js</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="whitespace-pre-wrap"> schedulePerformWorkUntilDeadline</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="whitespace-pre-wrap"> localSetImmediate </span><span class="whitespace-pre-wrap">===</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(255, 121, 198)">&#x27;function&#x27;</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// 兼容旧版 IE 和 NodeJs，使用 setImmediate</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Node.js and old IE.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// There&#x27;s a few reasons for why we prefer setImmediate.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">//</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Unlike MessageChannel, it doesn&#x27;t prevent a Node.js process from exiting.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// (Even though this is a DOM fork of the Scheduler, you could get here</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// with a mix of Node.js 15+, which has a MessageChannel, and jsdom.)</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// https://github.com/facebook/react/issues/20756</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">//</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// But also, it runs earlier which is the semantic we want.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// If other browsers ever implement it, it&#x27;s better to use it.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Although both of these would be inferior to native scheduling.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">schedulePerformWorkUntilDeadline</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">localSetImmediate</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap">performWorkUntilDeadline</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">MessageChannel</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">!==</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(255, 121, 198)">&#x27;undefined&#x27;</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// 如果运行环境支持 MessageChannel</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// DOM and Worker environments.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// We prefer MessageChannel because of the 4ms setTimeout clamping.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> channel </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">MessageChannel</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> port </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> channel</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">port2</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  channel</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">port1</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap">onmessage</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> performWorkUntilDeadline</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">schedulePerformWorkUntilDeadline</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    port</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">.</span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">postMessage</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// 最坏打算，使用 setTimeout</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// We should only fallback here in non-browser environments.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">schedulePerformWorkUntilDeadline</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// $FlowFixMe[not-a-function] nullable value</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap" style="color:rgb(80, 250, 123)">localSetTimeout</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap">performWorkUntilDeadline</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">0</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
<h3 class="mdx-heading text-xl font-semibold whitespace-pre-wrap mt-4 mb-2 group text-header dark:text-header-dark" id="关于任务队列">关于任务队列<a href="#关于任务队列" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h3>
<p class="whitespace-pre-wrap my-2 ">浏览器提供的关于任务队列的 API：</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">setTimeout</code>：至少会有 4ms 的延迟，并且嵌套使用延迟时间会被叠加</li>
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">requestAnimationFrame</code>：由于浏览器内核机制，有时存在 <a href="https://medium.com/@paul_irish/requestanimationframe-scheduling-for-nerds-9c57f7438ef4" class="hover:underline text-highlight decoration-2 underline-offset-2 decoration-highlight">丢帧</a> 的情况</li>
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">requestIdleCallback</code>：兼容性差，并且其实际的 FPS 只有 20ms，正常情况下渲染一帧时长控制在 16.67ms (1s / 60 = 16.67ms)。该时间是高于页面流畅的诉求，<a href="https://juejin.cn/post/7061947637167194142#heading-3" class="hover:underline text-highlight decoration-2 underline-offset-2 decoration-highlight">参考</a>。</li>
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">MessageChannel</code>：浏览器提供，用于创建一个 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">MessagePort</code> 对象，它允许两个运行在上下文中的脚本进行通信。</li>
</ul>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="工作原理">工作原理<a href="#工作原理" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<ol class="ml-6 my-3 list-decimal">
<li class="leading-relaxed "><strong class="font-bold">任务的优先级</strong>：React 的 Scheduler 根据任务的优先级来决定任务的执行顺序。React 将任务分为不同的优先级，例如渲染优先级、动画优先级等。每个优先级都有一个相应的调度队列，用于存储待执行的任务。</li>
<li class="leading-relaxed "><strong class="font-bold">任务的调度</strong>：在 React 中，任务可以是更新组件、执行副作用（例如数据获取或动画处理）等。Scheduler 根据任务的优先级和调度策略，决定何时执行任务。React 使用异步的方式执行任务，以避免阻塞主线程，提高应用程序的响应性。</li>
<li class="leading-relaxed "><strong class="font-bold">任务的中断与恢复</strong>：React 的 Scheduler 允许在任务执行过程中中断和恢复任务。这是为了保证高优先级任务的及时响应。当出现具有更高优先级的任务时，React 可以中断当前任务的执行，并执行更高优先级的任务。一旦高优先级任务完成，React 会恢复中断的任务的执行。</li>
<li class="leading-relaxed "><strong class="font-bold">任务的拆分和划分</strong>：为了更好地控制任务的执行和优先级，React 可以将任务拆分为更小的任务单元，并根据任务的重要性和优先级进行划分。这样可以在多个帧中分配任务执行，以保持应用程序的流畅性。</li>
</ol>
<p class="whitespace-pre-wrap my-2 ">通过 Scheduler 的工作，React 能够实现任务的优先级调度、中断和恢复，以及任务的拆分和划分。这样，React 可以更好地管理任务的执行顺序，并根据任务的重要性和优先级来提供更好的用户体验和响应性能。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="任务">任务<a href="#任务" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="优先级">优先级<a href="#优先级" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="中断和恢复">中断和恢复<a href="#中断和恢复" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="拆分">拆分<a href="#拆分" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2></article><aside class="hidden xl:block fixed top-14 right-0 w-[18rem] py-6 overflow-y-auto"><ul class="text-sm font-medium"><li class="pl-2 text-base">scheduler</li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#通过浏览器空闲时间执行任务" class="block py-1">通过浏览器空闲时间执行任务</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-6 text-xs"><a href="#关于任务队列" class="block py-1">关于任务队列</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#工作原理" class="block py-1">工作原理</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#任务" class="block py-1">任务</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#优先级" class="block py-1">优先级</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#中断和恢复" class="block py-1">中断和恢复</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#拆分" class="block py-1">拆分</a></li></ul></aside></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"toc":[{"text":"scheduler","hash":"#scheduler","depth":1},{"text":"通过浏览器空闲时间执行任务","hash":"#通过浏览器空闲时间执行任务","depth":2},{"text":"关于任务队列","hash":"#关于任务队列","depth":3},{"text":"工作原理","hash":"#工作原理","depth":2},{"text":"任务","hash":"#任务","depth":2},{"text":"优先级","hash":"#优先级","depth":2},{"text":"中断和恢复","hash":"#中断和恢复","depth":2},{"text":"拆分","hash":"#拆分","depth":2}],"code":"var Component=(()=\u003e{var d=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var g=(r,e)=\u003e()=\u003e(e||r((e={exports:{}}).exports,e),e.exports),k=(r,e)=\u003e{for(var l in e)s(r,l,{get:e[l],enumerable:!0})},c=(r,e,l,t)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let h of m(e))!p.call(r,h)\u0026\u0026h!==l\u0026\u0026s(r,h,{get:()=\u003ee[h],enumerable:!(t=u(e,h))||t.enumerable});return r};var M=(r,e,l)=\u003e(l=r!=null?d(f(r)):{},c(e||!r||!r.__esModule?s(l,\"default\",{value:r,enumerable:!0}):l,r)),j=r=\u003ec(s({},\"__esModule\",{value:!0}),r);var a=g((C,i)=\u003e{i.exports=_jsx_runtime});var b={};k(b,{default:()=\u003eS});var n=M(a());function o(r){let e=Object.assign({h1:\"h1\",p:\"p\",code:\"code\",h2:\"h2\",pre:\"pre\",h3:\"h3\",ul:\"ul\",li:\"li\",a:\"a\",ol:\"ol\",strong:\"strong\"},r.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{hash:\"scheduler\",children:\"scheduler\"}),`\n`,(0,n.jsx)(e.p,{children:\"scheduler \\u5B9E\\u9645\\u548C react \\u7684\\u7EC4\\u4EF6\\u6E32\\u67D3\\u7684\\u4EE3\\u7801\\u662F\\u72EC\\u7ACB\\u7684\\uFF0Cscheduler \\u5B83\\u662F\\u4E00\\u79CD\\u901A\\u7528\\u8BBE\\u8BA1\\uFF0C\\u53EA\\u8D1F\\u8D23\\u8C03\\u5EA6\\uFF0C\\u548C\\u5904\\u7406\\u5177\\u4F53\\u6E32\\u67D3\\u7684\\u4EE3\\u7801\\u65E0\\u5173\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6E90\\u7801\\u4E2D Scheduler \\u662F react \\u5355\\u72EC\\u5B9E\\u73B0\\u7684\\u4EFB\\u52A1\\u8C03\\u5EA6\\u5E93\\u3002\\u5B83\\u4E5F\\u53EF\\u4EE5\\u5B9E\\u73B0\\u5728\\u6D4F\\u89C8\\u5668\\u7A7A\\u95F2\\u65F6\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u800C\\u4E14\\u8FD8\\u53EF\\u4EE5\\u8BBE\\u7F6E\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\uFF0C\\u9AD8\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u5148\\u6267\\u884C\\uFF0C\\u4F4E\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u540E\\u6267\\u884C\\u3002 Scheduler \\u5B58\\u50A8\\u5728\\xA0\",(0,n.jsx)(e.code,{children:\"packages/scheduler\"}),\"\\xA0\\u6587\\u4EF6\\u5939\\u4E2D\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u901A\\u8FC7\\u6D4F\\u89C8\\u5668\\u7A7A\\u95F2\\u65F6\\u95F4\\u6267\\u884C\\u4EFB\\u52A1\",children:\"\\u901A\\u8FC7\\u6D4F\\u89C8\\u5668\\u7A7A\\u95F2\\u65F6\\u95F4\\u6267\\u884C\\u4EFB\\u52A1\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E0D\\u662F\\u5229\\u7528 JS \\u4E3B\\u7EBF\\u7A0B\\u800C\\u662F\\u901A\\u8FC7\\u6D4F\\u89C8\\u5668\\u7A7A\\u95F2\\u65F6\\u95F4\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u53EF\\u4EE5\\u63D0\\u9AD8\\u9875\\u9762\\u7684\\u54CD\\u5E94\\u6027\\uFF0C\\u9AD8\\u6548\\u7684\\u5229\\u7528\\u6D4F\\u89C8\\u5668\\u6027\\u80FD\\u3002\\u5229\\u7528\\u6D4F\\u89C8\\u5668\\u7684\\u4EFB\\u52A1\\u961F\\u5217\\uFF0C\\u53EF\\u4EE5\\u5B9E\\u73B0\\u8FD9\\u4E00\\u76EE\\u6807\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"react \\u4F7F\\u7528\\u4E86 messageChannel \\u7684\\u65B9\\u6848\\uFF0C\\u5C06\\u66F4\\u65B0\\u6E32\\u67D3\\u4EFB\\u52A1\\u4F5C\\u4E3A\\u5B8F\\u4EFB\\u52A1\\uFF0C\\u6765\\u8BA9\\u6E21\\u4E3B\\u7EBF\\u7A0B\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-JavaScript\",children:`// react/packages/scheduler/src/forks/Scheduler.js\nlet schedulePerformWorkUntilDeadline;\nif (typeof localSetImmediate === 'function') { // \\u517C\\u5BB9\\u65E7\\u7248 IE \\u548C NodeJs\\uFF0C\\u4F7F\\u7528 setImmediate\n  // Node.js and old IE.\n  // There's a few reasons for why we prefer setImmediate.\n  //\n  // Unlike MessageChannel, it doesn't prevent a Node.js process from exiting.\n  // (Even though this is a DOM fork of the Scheduler, you could get here\n  // with a mix of Node.js 15+, which has a MessageChannel, and jsdom.)\n  // https://github.com/facebook/react/issues/20756\n  //\n  // But also, it runs earlier which is the semantic we want.\n  // If other browsers ever implement it, it's better to use it.\n  // Although both of these would be inferior to native scheduling.\n  schedulePerformWorkUntilDeadline = () =\u003e {\n    localSetImmediate(performWorkUntilDeadline);\n  };\n} else if (typeof MessageChannel !== 'undefined') { // \\u5982\\u679C\\u8FD0\\u884C\\u73AF\\u5883\\u652F\\u6301 MessageChannel\n  // DOM and Worker environments.\n  // We prefer MessageChannel because of the 4ms setTimeout clamping.\n  const channel = new MessageChannel();\n  const port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = () =\u003e {\n    port.postMessage(null);\n  };\n} else { // \\u6700\\u574F\\u6253\\u7B97\\uFF0C\\u4F7F\\u7528 setTimeout\n  // We should only fallback here in non-browser environments.\n  schedulePerformWorkUntilDeadline = () =\u003e {\n    // $FlowFixMe[not-a-function] nullable value\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\n}\n`})}),`\n`,(0,n.jsx)(e.h3,{hash:\"\\u5173\\u4E8E\\u4EFB\\u52A1\\u961F\\u5217\",children:\"\\u5173\\u4E8E\\u4EFB\\u52A1\\u961F\\u5217\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\u7684\\u5173\\u4E8E\\u4EFB\\u52A1\\u961F\\u5217\\u7684 API\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"setTimeout\"}),\"\\uFF1A\\u81F3\\u5C11\\u4F1A\\u6709 4ms \\u7684\\u5EF6\\u8FDF\\uFF0C\\u5E76\\u4E14\\u5D4C\\u5957\\u4F7F\\u7528\\u5EF6\\u8FDF\\u65F6\\u95F4\\u4F1A\\u88AB\\u53E0\\u52A0\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"requestAnimationFrame\"}),\"\\uFF1A\\u7531\\u4E8E\\u6D4F\\u89C8\\u5668\\u5185\\u6838\\u673A\\u5236\\uFF0C\\u6709\\u65F6\\u5B58\\u5728 \",(0,n.jsx)(e.a,{href:\"https://medium.com/@paul_irish/requestanimationframe-scheduling-for-nerds-9c57f7438ef4\",children:\"\\u4E22\\u5E27\"}),\" \\u7684\\u60C5\\u51B5\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"requestIdleCallback\"}),\"\\uFF1A\\u517C\\u5BB9\\u6027\\u5DEE\\uFF0C\\u5E76\\u4E14\\u5176\\u5B9E\\u9645\\u7684 FPS \\u53EA\\u6709 20ms\\uFF0C\\u6B63\\u5E38\\u60C5\\u51B5\\u4E0B\\u6E32\\u67D3\\u4E00\\u5E27\\u65F6\\u957F\\u63A7\\u5236\\u5728 16.67ms (1s / 60 = 16.67ms)\\u3002\\u8BE5\\u65F6\\u95F4\\u662F\\u9AD8\\u4E8E\\u9875\\u9762\\u6D41\\u7545\\u7684\\u8BC9\\u6C42\\uFF0C\",(0,n.jsx)(e.a,{href:\"https://juejin.cn/post/7061947637167194142#heading-3\",children:\"\\u53C2\\u8003\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"MessageChannel\"}),\"\\uFF1A\\u6D4F\\u89C8\\u5668\\u63D0\\u4F9B\\uFF0C\\u7528\\u4E8E\\u521B\\u5EFA\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"MessagePort\"}),\" \\u5BF9\\u8C61\\uFF0C\\u5B83\\u5141\\u8BB8\\u4E24\\u4E2A\\u8FD0\\u884C\\u5728\\u4E0A\\u4E0B\\u6587\\u4E2D\\u7684\\u811A\\u672C\\u8FDB\\u884C\\u901A\\u4FE1\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u5DE5\\u4F5C\\u539F\\u7406\",children:\"\\u5DE5\\u4F5C\\u539F\\u7406\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\"}),\"\\uFF1AReact \\u7684 Scheduler \\u6839\\u636E\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\u6765\\u51B3\\u5B9A\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\u987A\\u5E8F\\u3002React \\u5C06\\u4EFB\\u52A1\\u5206\\u4E3A\\u4E0D\\u540C\\u7684\\u4F18\\u5148\\u7EA7\\uFF0C\\u4F8B\\u5982\\u6E32\\u67D3\\u4F18\\u5148\\u7EA7\\u3001\\u52A8\\u753B\\u4F18\\u5148\\u7EA7\\u7B49\\u3002\\u6BCF\\u4E2A\\u4F18\\u5148\\u7EA7\\u90FD\\u6709\\u4E00\\u4E2A\\u76F8\\u5E94\\u7684\\u8C03\\u5EA6\\u961F\\u5217\\uFF0C\\u7528\\u4E8E\\u5B58\\u50A8\\u5F85\\u6267\\u884C\\u7684\\u4EFB\\u52A1\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u7684\\u8C03\\u5EA6\"}),\"\\uFF1A\\u5728 React \\u4E2D\\uFF0C\\u4EFB\\u52A1\\u53EF\\u4EE5\\u662F\\u66F4\\u65B0\\u7EC4\\u4EF6\\u3001\\u6267\\u884C\\u526F\\u4F5C\\u7528\\uFF08\\u4F8B\\u5982\\u6570\\u636E\\u83B7\\u53D6\\u6216\\u52A8\\u753B\\u5904\\u7406\\uFF09\\u7B49\\u3002Scheduler \\u6839\\u636E\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\u548C\\u8C03\\u5EA6\\u7B56\\u7565\\uFF0C\\u51B3\\u5B9A\\u4F55\\u65F6\\u6267\\u884C\\u4EFB\\u52A1\\u3002React \\u4F7F\\u7528\\u5F02\\u6B65\\u7684\\u65B9\\u5F0F\\u6267\\u884C\\u4EFB\\u52A1\\uFF0C\\u4EE5\\u907F\\u514D\\u963B\\u585E\\u4E3B\\u7EBF\\u7A0B\\uFF0C\\u63D0\\u9AD8\\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u54CD\\u5E94\\u6027\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u7684\\u4E2D\\u65AD\\u4E0E\\u6062\\u590D\"}),\"\\uFF1AReact \\u7684 Scheduler \\u5141\\u8BB8\\u5728\\u4EFB\\u52A1\\u6267\\u884C\\u8FC7\\u7A0B\\u4E2D\\u4E2D\\u65AD\\u548C\\u6062\\u590D\\u4EFB\\u52A1\\u3002\\u8FD9\\u662F\\u4E3A\\u4E86\\u4FDD\\u8BC1\\u9AD8\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u7684\\u53CA\\u65F6\\u54CD\\u5E94\\u3002\\u5F53\\u51FA\\u73B0\\u5177\\u6709\\u66F4\\u9AD8\\u4F18\\u5148\\u7EA7\\u7684\\u4EFB\\u52A1\\u65F6\\uFF0CReact \\u53EF\\u4EE5\\u4E2D\\u65AD\\u5F53\\u524D\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\uFF0C\\u5E76\\u6267\\u884C\\u66F4\\u9AD8\\u4F18\\u5148\\u7EA7\\u7684\\u4EFB\\u52A1\\u3002\\u4E00\\u65E6\\u9AD8\\u4F18\\u5148\\u7EA7\\u4EFB\\u52A1\\u5B8C\\u6210\\uFF0CReact \\u4F1A\\u6062\\u590D\\u4E2D\\u65AD\\u7684\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u4EFB\\u52A1\\u7684\\u62C6\\u5206\\u548C\\u5212\\u5206\"}),\"\\uFF1A\\u4E3A\\u4E86\\u66F4\\u597D\\u5730\\u63A7\\u5236\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\u548C\\u4F18\\u5148\\u7EA7\\uFF0CReact \\u53EF\\u4EE5\\u5C06\\u4EFB\\u52A1\\u62C6\\u5206\\u4E3A\\u66F4\\u5C0F\\u7684\\u4EFB\\u52A1\\u5355\\u5143\\uFF0C\\u5E76\\u6839\\u636E\\u4EFB\\u52A1\\u7684\\u91CD\\u8981\\u6027\\u548C\\u4F18\\u5148\\u7EA7\\u8FDB\\u884C\\u5212\\u5206\\u3002\\u8FD9\\u6837\\u53EF\\u4EE5\\u5728\\u591A\\u4E2A\\u5E27\\u4E2D\\u5206\\u914D\\u4EFB\\u52A1\\u6267\\u884C\\uFF0C\\u4EE5\\u4FDD\\u6301\\u5E94\\u7528\\u7A0B\\u5E8F\\u7684\\u6D41\\u7545\\u6027\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u901A\\u8FC7 Scheduler \\u7684\\u5DE5\\u4F5C\\uFF0CReact \\u80FD\\u591F\\u5B9E\\u73B0\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\u8C03\\u5EA6\\u3001\\u4E2D\\u65AD\\u548C\\u6062\\u590D\\uFF0C\\u4EE5\\u53CA\\u4EFB\\u52A1\\u7684\\u62C6\\u5206\\u548C\\u5212\\u5206\\u3002\\u8FD9\\u6837\\uFF0CReact \\u53EF\\u4EE5\\u66F4\\u597D\\u5730\\u7BA1\\u7406\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\u987A\\u5E8F\\uFF0C\\u5E76\\u6839\\u636E\\u4EFB\\u52A1\\u7684\\u91CD\\u8981\\u6027\\u548C\\u4F18\\u5148\\u7EA7\\u6765\\u63D0\\u4F9B\\u66F4\\u597D\\u7684\\u7528\\u6237\\u4F53\\u9A8C\\u548C\\u54CD\\u5E94\\u6027\\u80FD\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u4EFB\\u52A1\",children:\"\\u4EFB\\u52A1\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u4F18\\u5148\\u7EA7\",children:\"\\u4F18\\u5148\\u7EA7\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u4E2D\\u65AD\\u548C\\u6062\\u590D\",children:\"\\u4E2D\\u65AD\\u548C\\u6062\\u590D\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u62C6\\u5206\",children:\"\\u62C6\\u5206\"})]})}function w(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,Object.assign({},r,{children:(0,n.jsx)(o,r)})):o(r)}var S=w;return j(b);})();\n;return Component;"},"__N_SSG":true},"page":"/[[...id]]","query":{"id":["react-src","scheduler"]},"buildId":"1n3RON42eWQmN0ceCWFd0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>