<!DOCTYPE html><html lang="cn"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/9028decf9ceeb2fa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9028decf9ceeb2fa.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-38cee4c0e358b1a3.js" defer=""></script><script src="/_next/static/chunks/framework-6698976aa0ea586d.js" defer=""></script><script src="/_next/static/chunks/main-9ca4f46f71f15dad.js" defer=""></script><script src="/_next/static/chunks/pages/_app-233c820ee5f72f94.js" defer=""></script><script src="/_next/static/chunks/7a7c95a0-ab903f899792323b.js" defer=""></script><script src="/_next/static/chunks/581-340f217658a3c725.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...id%5D%5D-706fc642a67ce3cd.js" defer=""></script><script src="/_next/static/ntD6QUMlZQsl3mf9dMsvt/_buildManifest.js" defer=""></script><script src="/_next/static/ntD6QUMlZQsl3mf9dMsvt/_ssgManifest.js" defer=""></script></head><body class=" bg-light text-light-text dark:bg-dark dark:text-dark-text max-sm:text-sm"><script>
                (function () {
                  function setTheme(newTheme) {
                    window.__theme = newTheme;
                    if (newTheme === 'dark') {
                      document.documentElement.classList.add('dark');
                    } else if (newTheme === 'light') {
                      document.documentElement.classList.remove('dark');
                    }
                  }

                  var preferredTheme;
                  try {
                    preferredTheme = localStorage.getItem('theme');
                  } catch (err) { }

                  window.__setPreferredTheme = function(newTheme) {
                    preferredTheme = newTheme;
                    setTheme(newTheme);
                    try {
                      localStorage.setItem('theme', newTheme);
                    } catch (err) { }
                  };

                  var initialTheme = preferredTheme;
                  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

                  if (!initialTheme) {
                    initialTheme = darkQuery.matches ? 'dark' : 'light';
                  }
                  setTheme(initialTheme);

                  darkQuery.addEventListener('change', function (e) {
                    if (!preferredTheme) {
                      setTheme(e.matches ? 'dark' : 'light');
                    }
                  });
                })();
              </script><div id="__next"><header class="w-full fixed t-0 h-14 border-b backdrop-blur border-slate-900/10 dark:border-slate-300/10 z-10"><div class="w-full h-full flex flex-row items-center justify-between px-4"><div>厘清逻辑</div><div class="mr-2 flex flex-row items-center justify-between gap-2 text-xl"><a href="https://github.com/Xxs-7/Xxs-7.github.io" class="p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a><button class="block dark:hidden p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" type="button" aria-label="Use Dark Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"></path></svg></button><button type="button" class="hidden dark:block p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" aria-label="Use Light Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z"></path></svg></button></div></div></header><div class="pt-14 flex max-w-screen overflow-y-scroll"><nav class="hidden lg:block fixed top-14 lg:bottom-0 lg:h-screen w-[18rem] pb-10 px-4 overflow-y-auto min-h-screen z-10"><nav><ul class="mt-6"><!--$--><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">html</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/SemanticsTag">语义化标签</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/anchor">锚元素</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">css</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/flex">flex 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/grid">grid 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/unit">布局单位</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">javascript</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/promise">promise</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/async-await">async 和 await</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/execution-context">执行上下文</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/javascript/scopes">作用域</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/lifecycle">lifecycle</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/hook">hook</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/high-compoment">组件逻辑复用方案</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react 源码</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/architecture">源码架构</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/fiber-node">fiber 节点</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-mode">渲染模式</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/scheduler">scheduler</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/first-render">初次渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/update-render">更新渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-task">渲染任务的执行</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/context">Context</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">实践</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/music-player">音乐播放器</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/font-advance">字体库优化</a></li></ul></li><!--/$--></ul></nav></nav><main class="relative lg:ml-[18rem] min-w-0 flex-1 px-5 "><article class="mx-auto xl:max-w-none overflow-x-hidden xl:ml-0 xl:mr-[18rem]"><h1 class="mdx-heading text-3xl font-extrabold my-6 text-header dark:text-header-dark" id="渲染过程">渲染过程</h1>
<p class="whitespace-pre-wrap my-2 ">react 的渲染过程主要分为两个阶段：render（或称 Reconcile） 阶段和 Commit 阶段。</p>
<p class="whitespace-pre-wrap my-2 ">commit 阶段。</p>
<p class="whitespace-pre-wrap my-2 ">commitBeforeMutationEffects
commitMutationEffects
commitLayoutEffects</p>
<blockquote class="border-l-2 border-current border-solid py-2 px-4 my-2 shadow-inner bg-[rgba(135,131,120,0.15)] dark:bg-highlight-dark bg-opacity-50 flex relative"><span class="block relative">
<p class="whitespace-pre-wrap my-2 ">前端框架的渲染指的是将数据和模版拼接到一起呈现到页面上。</p>
</span></blockquote>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="render">render<a href="#render" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">在 render 阶段，React 会通过 Diff 算法比较新旧虚拟 DOM 树，找出差异，并构建 Fiber 树。每个 Fiber 节点表示组件树中的一个组件或 DOM 节点，并包含了比对结果所要进行修改真实 dom 的相关信息。</p>
<p class="whitespace-pre-wrap my-2 "><strong class="font-bold">核心函数</strong> 是 react/packages/react-reconciler/src/ReactFiberReconciler 中的<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">performUnitOfWork</code>，函数内执行了两个重要函数 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">beginWork</code> 和<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">completeUnitOfWork</code></p>
<p class="whitespace-pre-wrap my-2 "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">beginWork</code></p>
<p class="whitespace-pre-wrap my-2 ">对 fiber 树自上而下遍历子节点，对每个 fiber 处理了以下内容：</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">根据当前工作的 fiber 节点最新的 react element 子元素和旧的 fiber 子元素进行比较以决定是否复用旧的 fiber 节点，</li>
<li class="leading-relaxed ">标记 fiber 节点是否有副作用 effectTag。</li>
<li class="leading-relaxed ">如果是类组件或者函数组件，则需要调用类组件实例的 render 方法或者执行函数组件获取最新的 react element 子元素</li>
</ul>
<p class="whitespace-pre-wrap my-2 "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">completeUnitOfWork</code></p>
<p class="whitespace-pre-wrap my-2 ">对于 HostComponent。比较 newProps 和 oldProps，收集发生变更的属性键值对，并存储在 fiber.updateQueue 中
构建副作用链表。自底向上找出有副作用的 fiber 节点，并构建单向链表</p>
<p class="whitespace-pre-wrap my-2 ">render 阶段的结果是一个副作用链表 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">effectList</code> 以及一棵 fiber 树 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">finishedWork</code></p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="commit">Commit<a href="#commit" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 "><strong class="font-bold">核心函数</strong></p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">commitBeforeMutationEffects</code></li>
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">commitMutationEffects</code></li>
<li class="leading-relaxed "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">commitLayoutEffects</code></li>
</ul>
<p class="whitespace-pre-wrap my-2 ">在提交阶段，React 将协调阶段中构建的 Fiber 树转化为实际的 DOM 更新。React 会遍历 Fiber 树，并根据需要执行更新操作。</p>
<p class="whitespace-pre-wrap my-2 ">渲染阶段的工作原理如下：</p>
<p class="whitespace-pre-wrap my-2 ">提交阶段：在渲染阶段，React 遍历 Fiber 树，执行实际的 DOM 操作，包括创建、更新和删除节点。这些更新操作被称为提交（Commit）。</p>
<p class="whitespace-pre-wrap my-2 ">批量更新：React 尽可能地批量处理多个更新操作，以减少对实际 DOM 的操作次数。这样可以提高性能和优化渲染的效率。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="参考资料">参考资料<a href="#参考资料" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 "><a href="https://juejin.cn/post/7109779698879725599" class="hover:underline text-highlight decoration-2 underline-offset-2 decoration-highlight">https://juejin.cn/post/7109779698879725599</a></p></article><aside class="hidden xl:block fixed top-14 right-0 w-[18rem] py-6 overflow-y-auto"><ul class="text-sm font-medium"><li class="pl-2 text-base">渲染过程</li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#render" class="block py-1">render</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#commit" class="block py-1">Commit</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#参考资料" class="block py-1">参考资料</a></li></ul></aside></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"toc":[{"text":"渲染过程","hash":"#渲染过程","depth":1},{"text":"render","hash":"#render","depth":2},{"text":"Commit","hash":"#commit","depth":2},{"text":"参考资料","hash":"#参考资料","depth":2}],"code":"var Component=(()=\u003e{var a=Object.create;var t=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(c,e)=\u003e()=\u003e(e||c((e={exports:{}}).exports,e),e.exports),g=(c,e)=\u003e{for(var r in e)t(c,r,{get:e[r],enumerable:!0})},d=(c,e,r,o)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!u.call(c,i)\u0026\u0026i!==r\u0026\u0026t(c,i,{get:()=\u003ee[i],enumerable:!(o=f(e,i))||o.enumerable});return c};var M=(c,e,r)=\u003e(r=c!=null?a(p(c)):{},d(e||!c||!c.__esModule?t(r,\"default\",{value:c,enumerable:!0}):r,c)),j=c=\u003ed(t({},\"__esModule\",{value:!0}),c);var h=b((F,l)=\u003e{l.exports=_jsx_runtime});var x={};g(x,{default:()=\u003eO});var n=M(h());function s(c){let e=Object.assign({h1:\"h1\",p:\"p\",blockquote:\"blockquote\",h2:\"h2\",strong:\"strong\",code:\"code\",ul:\"ul\",li:\"li\",a:\"a\"},c.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{hash:\"\\u6E32\\u67D3\\u8FC7\\u7A0B\",children:\"\\u6E32\\u67D3\\u8FC7\\u7A0B\"}),`\n`,(0,n.jsx)(e.p,{children:\"react \\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E3B\\u8981\\u5206\\u4E3A\\u4E24\\u4E2A\\u9636\\u6BB5\\uFF1Arender\\uFF08\\u6216\\u79F0 Reconcile\\uFF09 \\u9636\\u6BB5\\u548C Commit \\u9636\\u6BB5\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"commit \\u9636\\u6BB5\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:`commitBeforeMutationEffects\ncommitMutationEffects\ncommitLayoutEffects`}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u524D\\u7AEF\\u6846\\u67B6\\u7684\\u6E32\\u67D3\\u6307\\u7684\\u662F\\u5C06\\u6570\\u636E\\u548C\\u6A21\\u7248\\u62FC\\u63A5\\u5230\\u4E00\\u8D77\\u5448\\u73B0\\u5230\\u9875\\u9762\\u4E0A\\u3002\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{hash:\"render\",children:\"render\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 render \\u9636\\u6BB5\\uFF0CReact \\u4F1A\\u901A\\u8FC7 Diff \\u7B97\\u6CD5\\u6BD4\\u8F83\\u65B0\\u65E7\\u865A\\u62DF DOM \\u6811\\uFF0C\\u627E\\u51FA\\u5DEE\\u5F02\\uFF0C\\u5E76\\u6784\\u5EFA Fiber \\u6811\\u3002\\u6BCF\\u4E2A Fiber \\u8282\\u70B9\\u8868\\u793A\\u7EC4\\u4EF6\\u6811\\u4E2D\\u7684\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u6216 DOM \\u8282\\u70B9\\uFF0C\\u5E76\\u5305\\u542B\\u4E86\\u6BD4\\u5BF9\\u7ED3\\u679C\\u6240\\u8981\\u8FDB\\u884C\\u4FEE\\u6539\\u771F\\u5B9E dom \\u7684\\u76F8\\u5173\\u4FE1\\u606F\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u6838\\u5FC3\\u51FD\\u6570\"}),\" \\u662F react/packages/react-reconciler/src/ReactFiberReconciler \\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"performUnitOfWork\"}),\"\\uFF0C\\u51FD\\u6570\\u5185\\u6267\\u884C\\u4E86\\u4E24\\u4E2A\\u91CD\\u8981\\u51FD\\u6570 \",(0,n.jsx)(e.code,{children:\"beginWork\"}),\" \\u548C\",(0,n.jsx)(e.code,{children:\"completeUnitOfWork\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"beginWork\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5BF9 fiber \\u6811\\u81EA\\u4E0A\\u800C\\u4E0B\\u904D\\u5386\\u5B50\\u8282\\u70B9\\uFF0C\\u5BF9\\u6BCF\\u4E2A fiber \\u5904\\u7406\\u4E86\\u4EE5\\u4E0B\\u5185\\u5BB9\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u6839\\u636E\\u5F53\\u524D\\u5DE5\\u4F5C\\u7684 fiber \\u8282\\u70B9\\u6700\\u65B0\\u7684 react element \\u5B50\\u5143\\u7D20\\u548C\\u65E7\\u7684 fiber \\u5B50\\u5143\\u7D20\\u8FDB\\u884C\\u6BD4\\u8F83\\u4EE5\\u51B3\\u5B9A\\u662F\\u5426\\u590D\\u7528\\u65E7\\u7684 fiber \\u8282\\u70B9\\uFF0C\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6807\\u8BB0 fiber \\u8282\\u70B9\\u662F\\u5426\\u6709\\u526F\\u4F5C\\u7528 effectTag\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5982\\u679C\\u662F\\u7C7B\\u7EC4\\u4EF6\\u6216\\u8005\\u51FD\\u6570\\u7EC4\\u4EF6\\uFF0C\\u5219\\u9700\\u8981\\u8C03\\u7528\\u7C7B\\u7EC4\\u4EF6\\u5B9E\\u4F8B\\u7684 render \\u65B9\\u6CD5\\u6216\\u8005\\u6267\\u884C\\u51FD\\u6570\\u7EC4\\u4EF6\\u83B7\\u53D6\\u6700\\u65B0\\u7684 react element \\u5B50\\u5143\\u7D20\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.code,{children:\"completeUnitOfWork\"})}),`\n`,(0,n.jsx)(e.p,{children:`\\u5BF9\\u4E8E HostComponent\\u3002\\u6BD4\\u8F83 newProps \\u548C oldProps\\uFF0C\\u6536\\u96C6\\u53D1\\u751F\\u53D8\\u66F4\\u7684\\u5C5E\\u6027\\u952E\\u503C\\u5BF9\\uFF0C\\u5E76\\u5B58\\u50A8\\u5728 fiber.updateQueue \\u4E2D\n\\u6784\\u5EFA\\u526F\\u4F5C\\u7528\\u94FE\\u8868\\u3002\\u81EA\\u5E95\\u5411\\u4E0A\\u627E\\u51FA\\u6709\\u526F\\u4F5C\\u7528\\u7684 fiber \\u8282\\u70B9\\uFF0C\\u5E76\\u6784\\u5EFA\\u5355\\u5411\\u94FE\\u8868`}),`\n`,(0,n.jsxs)(e.p,{children:[\"render \\u9636\\u6BB5\\u7684\\u7ED3\\u679C\\u662F\\u4E00\\u4E2A\\u526F\\u4F5C\\u7528\\u94FE\\u8868 \",(0,n.jsx)(e.code,{children:\"effectList\"}),\" \\u4EE5\\u53CA\\u4E00\\u68F5 fiber \\u6811 \",(0,n.jsx)(e.code,{children:\"finishedWork\"})]}),`\n`,(0,n.jsx)(e.h2,{hash:\"commit\",children:\"Commit\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u6838\\u5FC3\\u51FD\\u6570\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\"commitBeforeMutationEffects\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\"commitMutationEffects\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.code,{children:\"commitLayoutEffects\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u63D0\\u4EA4\\u9636\\u6BB5\\uFF0CReact \\u5C06\\u534F\\u8C03\\u9636\\u6BB5\\u4E2D\\u6784\\u5EFA\\u7684 Fiber \\u6811\\u8F6C\\u5316\\u4E3A\\u5B9E\\u9645\\u7684 DOM \\u66F4\\u65B0\\u3002React \\u4F1A\\u904D\\u5386 Fiber \\u6811\\uFF0C\\u5E76\\u6839\\u636E\\u9700\\u8981\\u6267\\u884C\\u66F4\\u65B0\\u64CD\\u4F5C\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6E32\\u67D3\\u9636\\u6BB5\\u7684\\u5DE5\\u4F5C\\u539F\\u7406\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u63D0\\u4EA4\\u9636\\u6BB5\\uFF1A\\u5728\\u6E32\\u67D3\\u9636\\u6BB5\\uFF0CReact \\u904D\\u5386 Fiber \\u6811\\uFF0C\\u6267\\u884C\\u5B9E\\u9645\\u7684 DOM \\u64CD\\u4F5C\\uFF0C\\u5305\\u62EC\\u521B\\u5EFA\\u3001\\u66F4\\u65B0\\u548C\\u5220\\u9664\\u8282\\u70B9\\u3002\\u8FD9\\u4E9B\\u66F4\\u65B0\\u64CD\\u4F5C\\u88AB\\u79F0\\u4E3A\\u63D0\\u4EA4\\uFF08Commit\\uFF09\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6279\\u91CF\\u66F4\\u65B0\\uFF1AReact \\u5C3D\\u53EF\\u80FD\\u5730\\u6279\\u91CF\\u5904\\u7406\\u591A\\u4E2A\\u66F4\\u65B0\\u64CD\\u4F5C\\uFF0C\\u4EE5\\u51CF\\u5C11\\u5BF9\\u5B9E\\u9645 DOM \\u7684\\u64CD\\u4F5C\\u6B21\\u6570\\u3002\\u8FD9\\u6837\\u53EF\\u4EE5\\u63D0\\u9AD8\\u6027\\u80FD\\u548C\\u4F18\\u5316\\u6E32\\u67D3\\u7684\\u6548\\u7387\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u53C2\\u8003\\u8D44\\u6599\",children:\"\\u53C2\\u8003\\u8D44\\u6599\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://juejin.cn/post/7109779698879725599\",children:\"https://juejin.cn/post/7109779698879725599\"})})]})}function k(c={}){let{wrapper:e}=c.components||{};return e?(0,n.jsx)(e,Object.assign({},c,{children:(0,n.jsx)(s,c)})):s(c)}var O=k;return j(x);})();\n;return Component;"},"__N_SSG":true},"page":"/[[...id]]","query":{"id":["react-src","render-process"]},"buildId":"ntD6QUMlZQsl3mf9dMsvt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>