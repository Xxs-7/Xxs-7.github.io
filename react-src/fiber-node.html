<!DOCTYPE html><html lang="cn"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/28746ebb45a12272.css" as="style"/><link rel="stylesheet" href="/_next/static/css/28746ebb45a12272.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-38cee4c0e358b1a3.js" defer=""></script><script src="/_next/static/chunks/framework-6698976aa0ea586d.js" defer=""></script><script src="/_next/static/chunks/main-9ca4f46f71f15dad.js" defer=""></script><script src="/_next/static/chunks/pages/_app-986721e49ce0186e.js" defer=""></script><script src="/_next/static/chunks/7a7c95a0-ab903f899792323b.js" defer=""></script><script src="/_next/static/chunks/581-340f217658a3c725.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...id%5D%5D-706fc642a67ce3cd.js" defer=""></script><script src="/_next/static/tm4WpqTZk4RfqfoaAvJmO/_buildManifest.js" defer=""></script><script src="/_next/static/tm4WpqTZk4RfqfoaAvJmO/_ssgManifest.js" defer=""></script></head><body class=" bg-light text-light-text dark:bg-dark dark:text-dark-text max-sm:text-sm"><script>
                (function () {
                  function setTheme(newTheme) {
                    window.__theme = newTheme;
                    if (newTheme === 'dark') {
                      document.documentElement.classList.add('dark');
                    } else if (newTheme === 'light') {
                      document.documentElement.classList.remove('dark');
                    }
                  }

                  var preferredTheme;
                  try {
                    preferredTheme = localStorage.getItem('theme');
                  } catch (err) { }

                  window.__setPreferredTheme = function(newTheme) {
                    preferredTheme = newTheme;
                    setTheme(newTheme);
                    try {
                      localStorage.setItem('theme', newTheme);
                    } catch (err) { }
                  };

                  var initialTheme = preferredTheme;
                  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

                  if (!initialTheme) {
                    initialTheme = darkQuery.matches ? 'dark' : 'light';
                  }
                  setTheme(initialTheme);

                  darkQuery.addEventListener('change', function (e) {
                    if (!preferredTheme) {
                      setTheme(e.matches ? 'dark' : 'light');
                    }
                  });
                })();
              </script><div id="__next"><header class="w-full fixed t-0 h-14 border-b backdrop-blur border-slate-900/10 dark:border-slate-300/10 z-10"><div class="w-full h-full flex flex-row items-center justify-between px-4"><div>厘清逻辑</div><div class="mr-2 flex flex-row items-center justify-between gap-2 text-xl"><a href="https://github.com/Xxs-7/Xxs-7.github.io" class="p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a><button class="block dark:hidden p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" type="button" aria-label="Use Dark Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"></path></svg></button><button type="button" class="hidden dark:block p-1 rounded-full hover:bg-dark/5 hover:dark:bg-light/5" aria-label="Use Light Mode"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0V0z"></path><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z"></path></svg></button></div></div></header><div class="pt-14 flex max-w-screen overflow-y-scroll"><nav class="hidden lg:block fixed top-14 lg:bottom-0 lg:h-screen w-[18rem] pb-10 px-4 overflow-y-auto min-h-screen z-10"><nav><ul class="mt-6"><!--$--><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">html</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/SemanticsTag">语义化标签</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/html/anchor">锚元素</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">css</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/flex">flex 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/grid">grid 布局</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/css/unit">布局单位</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/lifecycle">lifecycle</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/hook">hook</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react/high-compoment">组件逻辑复用方案</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">react 源码</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/architecture">源码架构</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5 text-highlight"><a class="block" href="/react-src/fiber-node">fiber 节点</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-mode">渲染模式</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/scheduler">scheduler</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/first-render">初次渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/update-render">更新渲染</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/render-task">渲染任务的执行</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/react-src/execution-context">执行上下文</a></li></ul></li><li class="mt-1"><div class="pl-1 border border-transparent rounded-sm font-bold text-lg">实践</div><ul><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/music-player">音乐播放器</a></li><li class="pl-4 border border-transparent rounded-sm font-bold hover:bg-dark/5 text-sm py-0.5 hover:dark:bg-light/5"><a class="block" href="/demo/font-advance">字体库优化</a></li></ul></li><!--/$--></ul></nav></nav><main class="relative lg:ml-[18rem] min-w-0 flex-1 px-5 "><article class="mx-auto xl:max-w-none overflow-x-hidden xl:ml-0 xl:mr-[18rem]"><h1 class="mdx-heading text-3xl font-extrabold my-6 text-header dark:text-header-dark" id="fiber-节点">fiber 节点</h1>
<blockquote class="border-l-2 border-current border-solid py-2 px-4 my-2 shadow-inner bg-[rgba(135,131,120,0.15)] dark:bg-highlight-dark bg-opacity-50 flex relative"><span class="block relative">
<p class="whitespace-pre-wrap my-2 ">在阅读源码时使用到属性时再参照阅读，直接看而不了解代码逻辑没什么价值</p>
</span></blockquote>
<p class="whitespace-pre-wrap my-2 "><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">fiber</code> 节点就是描述随后要执行的工作的一种数据结构，可以类比于调用栈中的帧。<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">fiber</code>
 架构同时还提供了便捷的方式去<strong class="font-bold">追踪</strong>，<strong class="font-bold">调度</strong>，<strong class="font-bold">暂停</strong>，<strong class="font-bold">中断 reconcile 过程</strong></p>
<pre><!--$--><div class="prism-code language-tsx rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// A Fiber is work on a Component that needs to be done or was done. There can</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// be more than one per component.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// These first fields are conceptually members of an Instance. This used to</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// be split into a separate type and intersected with the other Fiber fields,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// but until Flow fixes its intersection bugs, we&#x27;ve merged them into a</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// single type.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// An Instance is shared between all versions of a component. We can easily</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// break this out into a separate object to avoid copying so much to the</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// alternate versions of the tree. We put this on a single object for now to</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// minimize the number of objects created during the initial render.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Tag identifying the type of fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  tag</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">WorkTag</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Unique identifier of this child.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  key</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">string</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The value of element.type which is used to preserve the identity during</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// reconciliation of this child.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  elementType</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The resolved function/class/ associated with this fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  type</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The local state associated with this fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  stateNode</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Conceptual aliases</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// parent : Instance -&gt; return The parent happens to be the same as the</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// return fiber since we&#x27;ve merged the fiber and instance.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Remaining fields belong to Fiber</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The Fiber to return to after finishing processing this one.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This is effectively the parent, but there can be multiple parents (two)</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// so this is only the parent of the thing we&#x27;re currently processing.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// It is conceptually the same as the return address of a stack frame.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Singly Linked List Tree Structure.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  child</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  sibling</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  index</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">number</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The ref last used to attach this node.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// I&#x27;ll avoid adding an owner field for prod and model that as functions.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  ref</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">(</span><span class="whitespace-pre-wrap">handle</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> mixed</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">&amp;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">{</span><span class="whitespace-pre-wrap">_stringRef</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">string</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">...</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">)</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">    </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">RefObject</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Input is the data coming into process this fiber. Arguments. Props.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  pendingProps</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This type will be more specific once we overload the tag.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  memoizedProps</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The props used to create the output.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// A queue of state updates and callbacks.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  updateQueue</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> mixed</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The state used to create the output</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  memoizedState</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">any</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Dependencies (contexts, events) for this fiber, if it has any</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  dependencies</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Dependencies</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Bitfield that describes properties about the fiber and its subtree. E.g.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// the ConcurrentMode flag indicates whether the subtree should be async-by-</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// default. When a fiber is created, it inherits the mode of its</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// parent. Additional flags can be set at creation time, but after that the</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// value should remain unchanged throughout the fiber&#x27;s lifetime, particularly</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// before its child fibers are created.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  mode</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">TypeOfMode</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Effect</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  flags</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Flags</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  subtreeFlags</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Flags</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  deletions</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Array</span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Singly linked list fast path to the next fiber with side-effects.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  nextEffect</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// The first and last fiber with side-effect within this subtree. This allows</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// us to reuse a slice of the linked list when we reuse the work done within</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// this fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  firstEffect</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  lastEffect</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  lanes</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Lanes</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  childLanes</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Lanes</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This is a pooled version of a Fiber. Every fiber that gets updated will</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// eventually have a pair. There are cases when we can clean up pairs to save</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// memory if we need to.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  alternate</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Time spent rendering this Fiber and its descendants for the current update.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This tells us how well the tree makes use of sCU for memoization.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// It is reset to 0 each time we render and only updated when we don&#x27;t bailout.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This field is only set when the enableProfilerTimer flag is enabled.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  actualDuration</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">number</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// If the Fiber is currently active in the &quot;render&quot; phase,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This marks the time at which the work began.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This field is only set when the enableProfilerTimer flag is enabled.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  actualStartTime</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">number</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Duration of the most recent render time for this Fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This value is not updated when we bailout for memoization purposes.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This field is only set when the enableProfilerTimer flag is enabled.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  selfBaseDuration</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">number</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Sum of base times for all descendants of this Fiber.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This value bubbles up during the &quot;complete&quot; phase.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// This field is only set when the enableProfilerTimer flag is enabled.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  treeBaseDuration</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">number</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Conceptual aliases</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// workInProgress : Fiber -&gt;  alternate The alternate used for reuse happens</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// to be the same as work in progress.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// __DEV__ only</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  _debugSource</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Source</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  _debugOwner</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fiber</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  _debugIsCurrentlyTiming</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">boolean</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  _debugNeedsRemount</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249)">boolean</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Used to verify that the order of hooks does not change between renders.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap">  _debugHookTypes</span><span class="whitespace-pre-wrap">?</span><span class="whitespace-pre-wrap">:</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Array</span><span class="whitespace-pre-wrap">&lt;</span><span class="whitespace-pre-wrap">HookType</span><span class="whitespace-pre-wrap">&gt;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">|</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">,</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">}</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="前置知识">前置知识<a href="#前置知识" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">原生元素（div，span）被认为是 host。也就是看到包含元素含义的变量名中包含 host，说的是原生元素。</p>
<p class="whitespace-pre-wrap my-2 ">fiber 是单链表结构。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="tag-worktag">Tag: WorkTag<a href="#tag-worktag" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">WorkTag 是 react 源码中的一个枚举类型，用来表示一个 fiber 节点的类型。它的主要作用是辅助 react 在处理更新过程中的各种边界情况（根据类型决定渲染的处理方式）。</p>
<p class="whitespace-pre-wrap my-2 ">例如，在 react 中，一个 fiber 节点可能会表示一个组件，也可能会表示一个元素（例如一个 HTML 标签）。如果一个 fiber 节点表示的是一个类组件，那么它的 WorkTag 就会是 ClassComponent；如果一个 fiber 节点表示的是一个元素，那么它的 WorkTag 就会是 HostComponent。然后 ，如果是类组件，就采用实例化的方式，而函数组件是执行的方式，etc。</p>
<p class="whitespace-pre-wrap my-2 ">通过这种方式，react 可以根据一个 fiber 节点的 WorkTag 来决定如何处理它，从而实现对不同类型节点的特定处理。</p>
<pre><!--$--><div class="prism-code language-js rounded-md p-4 overflow-x-auto text-sm" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// react-reconciler/src/ReactWorkTag.js</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">FunctionComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">0</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ClassComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">1</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">IndeterminateComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">2</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Before we know whether it is function or class</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">HostRoot</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">3</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// Root of a host tree. Could be nested inside another node.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">HostPortal</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">4</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(98, 114, 164)">// A subtree. Could be an entry point to a different renderer.</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">HostComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">5</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">HostText</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">6</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Fragment</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">7</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Mode</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">8</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ContextConsumer</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">9</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ContextProvider</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">10</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ForwardRef</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">11</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">Profiler</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">12</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">SuspenseComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">13</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">MemoComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">14</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">SimpleMemoComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">15</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">LazyComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">16</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">IncompleteClassComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">17</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">DehydratedFragment</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">18</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">SuspenseListComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">19</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">ScopeComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">21</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">OffscreenComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">22</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">LegacyHiddenComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">23</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">CacheComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">24</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div><div class="token-line" style="color:#F8F8F2"><span class="whitespace-pre-wrap"></span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">TracingMarkerComponent</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">=</span><span class="whitespace-pre-wrap"> </span><span class="whitespace-pre-wrap">25</span><span class="whitespace-pre-wrap" style="color:rgb(248, 248, 242)">;</span><span class="whitespace-pre-wrap"></span></div></div><!--/$--></pre>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="key">Key<a href="#key" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">标志当前节点在当前层级下的唯一性。</p>
<ol class="ml-6 my-3 list-decimal">
<li class="leading-relaxed ">帮助 react 在更新时区分同类元素，从而更快地定位到需要更新的元素。</li>
<li class="leading-relaxed ">提高渲染性能，因为 react 可以通过 key 来判断元素是否需要更新，避免对不必要的元素进行渲染。</li>
</ol>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="elementtype">elementType<a href="#elementtype" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">可以用来区分不同类型的元素，例如 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">div</code></strong>、**<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">span</code><strong class="font-bold">等。在组件的渲染过程中，React 会使用</strong><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">elementType</code>**属性来确定该组件应该如何渲染。例如，如果 **<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">elementType</code>**的值为 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">div</code></strong>，那么 React 就会渲染一个 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">div</code></strong> 元素。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="type">Type<a href="#type" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">大部分时候和 elementType 一样，标志组件的类型。区分当前组件是类组件，函数组件等，原生标签。</p>
<h3 class="mdx-heading text-xl font-semibold whitespace-pre-wrap mt-4 mb-2 group text-header dark:text-header-dark" id="statenode">stateNode<a href="#statenode" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h3>
<p class="whitespace-pre-wrap my-2 ">组件对应的 dom 节点，</p>
<p class="whitespace-pre-wrap my-2 ">函数组件 stateNode 为 null</p>
<p class="whitespace-pre-wrap my-2 ">类组件指向实例</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="return">return<a href="#return" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">是一个指针，它指向当前组件的父组件。在组件的渲染过程中，React 会使用这个指针来遍历组件的层级关系，最终构建出一颗树形结构，表示整个组件的结构。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="child">child<a href="#child" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">子节点，指向子节点的头节点</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="sibling">sibling<a href="#sibling" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">当前层次的下一个兄弟节点</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="index">index<a href="#index" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">fiber child 是单链表结构，diff 时需要知道当前节点在当前层级下的位置，dom diff 的时候需要知道节点的位置有没有发生变化。</p>
<p class="whitespace-pre-wrap my-2 ">key 和 index 参与 dom diff 算法的同层级比较</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="ref">ref<a href="#ref" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">这个属性用于存储组件的引用。当组件需要访问或修改其自身的属性时，通常会使用这个属性。它可以是 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">null</code>（没有引用），一个函数（用于在 DOM 中设置或更新属性值），或者一个 <code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">RefObject</code>（用于在函数式组件中访问和修改属性值）。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="pendingprops">pendingProps:<a href="#pendingprops" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">存储着组件的未更新的属性值。在组件的渲染过程中，如果一个组件的属性值发生了改变，React 会先将新的属性值存储在 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">pendingProps</code></strong>
中，然后在下一次渲染时再更新到组件上。这样做的目的是为了让更新更加高效，减少不必要的渲染。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="memorizedprops">memorizedProps:<a href="#memorizedprops" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">存储着组件的上一次渲染时的属性值。在组件的渲染过程中，React 会使用 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">memorizedProps</code></strong>
来对比当前的属性值和上一次的属性值，以确定哪些属性值发生了改变。如果某个属性值发生了改变，React 会将新的属性值存储在 **<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">pendingProps</code>**中，等待下一次渲染时再更新到组件上。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="updatequeue">updateQueue<a href="#updatequeue" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">更新的队列，它用于存储待更新的组件。在组件的渲染过程中，如果一个组件的 state 或 props 发生了改变，React 会将该组件添加到 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">updateQueue</code></strong> 中，等待下一次更新时再进行渲染。起到了缓存组件更新的作用，帮助 React 更高效地管理组件的渲染。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="memoizedstate">memoizedState<a href="#memoizedstate" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">存储着组件的上一次渲染时的状态值。在组件的渲染过程中，React 会使用 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">memoizedState</code></strong>
来对比当前的状态值和上一次的状态值，以确定哪些状态值发生了改变。如果某个状态值发生了改变，React 会将新的状态值存储在 **<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">pendingState</code>**中，等待下一次渲染时再更新到组件上。</p>
<p class="whitespace-pre-wrap my-2 ">如果是类组件，指向 state。</p>
<p class="whitespace-pre-wrap my-2 ">如果是函数组件，指向 hook 的 fiber 头节点。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="dependencies">dependencies<a href="#dependencies" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">存储着组件依赖的外部资源的信息。在组件的渲染过程中，React 会使用 <strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">dependencies</code></strong>
属性来确定组件是否需要重新渲染。如果一个组件依赖的外部资源发生了改变，那么 React 就会重新渲染该组件，以确保组件内容始终保持最新。</p>
<p class="whitespace-pre-wrap my-2 ">例如 context。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="mode">Mode<a href="#mode" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">**<code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">Mode</code><strong class="font-bold">是一个枚举类型，它用于表示组件当前的渲染模式。React 支持两种渲染模式：同步渲染模式和异步渲染模式。在同步渲染模式下，React 会在组件的渲染过程中立即执行所有更新操作，并立即进行渲染。而在异步渲染模式下，React 会将更新操作推迟到下一个渲染周期中执行，以提高渲染的效率。</strong><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">Mode</code>**属性用于表示组件当前所处的渲染模式，帮助 React 管理组件的渲染过程。</p>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed "><strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">NoMode</code></strong>：表示组件处于初始状态，没有进入渲染流程。</li>
<li class="leading-relaxed "><strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">StrictMode</code></strong>：表示组件处于严格模式，在这种模式下，React 会对组件的渲染过程进行更严格的检查，并在控制台输出警告信息。</li>
</ul>
<p class="whitespace-pre-wrap my-2 ">严格模式下的组件会更加注重性能，并且会提醒开发者避免一些常见的错误，例如使用了未经初始化的 state 或 props 等。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="flag">Flag<a href="#flag" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">代表该 fiber 要进行什么操作</p>
<p class="whitespace-pre-wrap my-2 ">代码注释写的是 effect ，副作用，不好理解。</p>
<p class="whitespace-pre-wrap my-2 ">它的值的类型是 Flags 类型，是一种特殊的数据类型，用来存储组件的状态信息。它可以包含多个二进制位，每个位都代表着一种状态。例如，一个组件的 Flags 类型的值可能包含 isMounted、hasNewUpdates 等信息，表示组件是否已挂载、是否有新的更新等状态。</p>
<p class="whitespace-pre-wrap my-2 ">在 React 中，Flags 类型通常与 React Fiber 结合使用，用来维护组件的状态信息，以便在下一次渲染时进行更新。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="subtreeflags">subtreeFlags<a href="#subtreeflags" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">表示该 fiber 的子树是否需要重新渲染。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="deletions">deletions<a href="#deletions" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">需要删除的子节点。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="lanes">lanes<a href="#lanes" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">它描述了 React 如何在不同的优先级之间分配时间以更新应用的 UI。通过使用 Lanes，React 可以更快地更新 UI，提高应用的性能。</p>
<p class="whitespace-pre-wrap my-2 ">在 React Fiber 中，Lanes 可以有不同的取值，每一个取值都表示一个不同的优先级。例如，可能会有一个 “high priority” 的 lane，表示应用的 UI 将优先于其他内容更新，并且可能会有一个 “low priority” 的 lane，表示应用的 UI 将在其他内容更新完成后再更新。具体来说，Lanes 的取值可以是任意整数，数字越大表示优先级越高。</p>
<p class="whitespace-pre-wrap my-2 ">例如，如果一个 React 应用正在执行一个操作，比如滚动页面，那么这个操作可能会被分配到一个 “high priority” 的 lane 中，这样 React 就可以优先处理滚动操作，保证应用的流畅性。</p>
<p class="whitespace-pre-wrap my-2 ">Lanes 模型通过位掩码来表示任务的优先级。每个任务都有一个 lanes 字段，是一个仅包含一位的位掩码。通过直接操作位掩码，可以解耦任务优先级和批处理概念。例如，可以通过如下代码来判断一个任务是否包含在一组任务中：</p>
<p class="whitespace-pre-wrap my-2 "><strong class="font-bold"><code class="inline text-code text-secondary dark:text-secondary-dark px-1.5 py-0.5 mx-0.5 rounded-md no-underline bg-[#f2ecde] dark:bg-[#2b333e] text-highlight whitespace-pre-wrap">const isTaskIncludedInBatch = (task &amp; batchOfTasks) !== 0;</code></strong></p>
<p class="whitespace-pre-wrap my-2 ">在 Lanes 模型中，通过对位掩码进行位运算，可以更方便地处理任务优先级和批处理之间的关系。另外，通过位运算，可以更有效地表达任务组，比如在一个范围内表示一组不同的任务。通过 Lanes 模型，我们可以更好地控制任务的执行顺序和优先级，以提高任务的处理效率。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="childlanes">childLanes<a href="#childlanes" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">表示该 fiber 的子节点需要重新渲染的优先级。</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="alternate">alternate<a href="#alternate" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">在组件更新时存放老节点，相当于老节点缓存</p>
<h2 class="mdx-heading text-2xl font-bold whitespace-pre-wrap mt-6 mb-4 group text-header  dark:text-header-dark" id="executioncontext">ExecutionContext<a href="#executioncontext" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h2>
<p class="whitespace-pre-wrap my-2 ">它描述了当前组件执行时的上下文。ExecutionContext 包含了当前组件的 props、state 以及其他一些相关信息，例如上下文的类型（比如类组件还是函数组件）。</p>
<p class="whitespace-pre-wrap my-2 ">ExecutionContext 可以被用来帮助 React 进行性能优化，例如通过分析 ExecutionContext 来决定哪些组件需要更新，从而避免不必要的组件渲染。</p>
<h3 class="mdx-heading text-xl font-semibold whitespace-pre-wrap mt-4 mb-2 group text-header dark:text-header-dark" id="什么是-fiber-">什么是 fiber ？<a href="#什么是-fiber-" class="hidden pl-2 group-hover:inline-block"><svg width="12" height="12" fill="none" aria-hidden="true"><path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></a></h3>
<ul class="ml-6 my-3 list-disc">
<li class="leading-relaxed ">是 react 用于处理组件渲染的一种非阻塞优化方案</li>
<li class="leading-relaxed ">是处理组件渲染任务的工作单元，每次要渲染或更新渲染组件，都需要创建对应的 fiber</li>
<li class="leading-relaxed ">对应待渲染的组件，包含组件的类型、属性、状态和渲染方法等，在处理时还会创建其子组件的 fiber，构建出 fiber 树。</li>
<li class="leading-relaxed ">fiber 树是用来管理所有待渲染的组件的树形结构，fiber 树中的每个节点都是一个 fiber 对象.</li>
</ul></article><aside class="hidden xl:block fixed top-14 right-0 w-[18rem] py-6 overflow-y-auto"><ul class="text-sm font-medium"><li class="pl-2 text-base">fiber 节点</li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#前置知识" class="block py-1">前置知识</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#tag-worktag" class="block py-1">Tag: WorkTag</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#key" class="block py-1">Key</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#elementtype" class="block py-1">elementType</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#type" class="block py-1">Type</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-6 text-xs"><a href="#statenode" class="block py-1">stateNode</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#return" class="block py-1">return</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#child" class="block py-1">child</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#sibling" class="block py-1">sibling</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#index" class="block py-1">index</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#ref" class="block py-1">ref</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#pendingprops" class="block py-1">pendingProps:</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#memorizedprops" class="block py-1">memorizedProps:</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#updatequeue" class="block py-1">updateQueue</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#memoizedstate" class="block py-1">memoizedState</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#dependencies" class="block py-1">dependencies</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#mode" class="block py-1">Mode</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#flag" class="block py-1">Flag</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#subtreeflags" class="block py-1">subtreeFlags</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#deletions" class="block py-1">deletions</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#lanes" class="block py-1">lanes</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#childlanes" class="block py-1">childLanes</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#alternate" class="block py-1">alternate</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-4"><a href="#executioncontext" class="block py-1">ExecutionContext</a></li><li class="border-l hover:text-hover border-slate-900/10 dark:border-slate-300/10 pl-6 text-xs"><a href="#什么是-fiber-" class="block py-1">什么是 fiber ？</a></li></ul></aside></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"toc":[{"text":"fiber 节点","hash":"#fiber-节点","depth":1},{"text":"前置知识","hash":"#前置知识","depth":2},{"text":"Tag: WorkTag","hash":"#tag-worktag","depth":2},{"text":"Key","hash":"#key","depth":2},{"text":"elementType","hash":"#elementtype","depth":2},{"text":"Type","hash":"#type","depth":2},{"text":"stateNode","hash":"#statenode","depth":3},{"text":"return","hash":"#return","depth":2},{"text":"child","hash":"#child","depth":2},{"text":"sibling","hash":"#sibling","depth":2},{"text":"index","hash":"#index","depth":2},{"text":"ref","hash":"#ref","depth":2},{"text":"pendingProps:","hash":"#pendingprops","depth":2},{"text":"memorizedProps:","hash":"#memorizedprops","depth":2},{"text":"updateQueue","hash":"#updatequeue","depth":2},{"text":"memoizedState","hash":"#memoizedstate","depth":2},{"text":"dependencies","hash":"#dependencies","depth":2},{"text":"Mode","hash":"#mode","depth":2},{"text":"Flag","hash":"#flag","depth":2},{"text":"subtreeFlags","hash":"#subtreeflags","depth":2},{"text":"deletions","hash":"#deletions","depth":2},{"text":"lanes","hash":"#lanes","depth":2},{"text":"childLanes","hash":"#childlanes","depth":2},{"text":"alternate","hash":"#alternate","depth":2},{"text":"ExecutionContext","hash":"#executioncontext","depth":2},{"text":"什么是 fiber ？","hash":"#什么是-fiber-","depth":3}],"code":"var Component=(()=\u003e{var d=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var m=(t,e)=\u003e()=\u003e(e||t((e={exports:{}}).exports,e),e.exports),g=(t,e)=\u003e{for(var r in e)o(t,r,{get:e[r],enumerable:!0})},h=(t,e,r,s)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!b.call(t,i)\u0026\u0026i!==r\u0026\u0026o(t,i,{get:()=\u003ee[i],enumerable:!(s=p(e,i))||s.enumerable});return t};var y=(t,e,r)=\u003e(r=t!=null?d(f(t)):{},h(e||!t||!t.__esModule?o(r,\"default\",{value:t,enumerable:!0}):r,t)),x=t=\u003eh(o({},\"__esModule\",{value:!0}),t);var l=m((F,a)=\u003e{a.exports=_jsx_runtime});var C={};g(C,{default:()=\u003ew});var n=y(l());function c(t){let e=Object.assign({h1:\"h1\",blockquote:\"blockquote\",p:\"p\",code:\"code\",strong:\"strong\",pre:\"pre\",h2:\"h2\",ol:\"ol\",li:\"li\",h3:\"h3\",ul:\"ul\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{hash:\"fiber-\\u8282\\u70B9\",children:\"fiber \\u8282\\u70B9\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u9605\\u8BFB\\u6E90\\u7801\\u65F6\\u4F7F\\u7528\\u5230\\u5C5E\\u6027\\u65F6\\u518D\\u53C2\\u7167\\u9605\\u8BFB\\uFF0C\\u76F4\\u63A5\\u770B\\u800C\\u4E0D\\u4E86\\u89E3\\u4EE3\\u7801\\u903B\\u8F91\\u6CA1\\u4EC0\\u4E48\\u4EF7\\u503C\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"fiber\"}),\"\\xA0\\u8282\\u70B9\\u5C31\\u662F\\u63CF\\u8FF0\\u968F\\u540E\\u8981\\u6267\\u884C\\u7684\\u5DE5\\u4F5C\\u7684\\u4E00\\u79CD\\u6570\\u636E\\u7ED3\\u6784\\uFF0C\\u53EF\\u4EE5\\u7C7B\\u6BD4\\u4E8E\\u8C03\\u7528\\u6808\\u4E2D\\u7684\\u5E27\\u3002\",(0,n.jsx)(e.code,{children:\"fiber\"}),`\n\\xA0\\u67B6\\u6784\\u540C\\u65F6\\u8FD8\\u63D0\\u4F9B\\u4E86\\u4FBF\\u6377\\u7684\\u65B9\\u5F0F\\u53BB`,(0,n.jsx)(e.strong,{children:\"\\u8FFD\\u8E2A\"}),\"\\uFF0C\",(0,n.jsx)(e.strong,{children:\"\\u8C03\\u5EA6\"}),\"\\uFF0C\",(0,n.jsx)(e.strong,{children:\"\\u6682\\u505C\"}),\"\\uFF0C\",(0,n.jsx)(e.strong,{children:\"\\u4E2D\\u65AD reconcile \\u8FC7\\u7A0B\"})]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-tsx\",children:`// A Fiber is work on a Component that needs to be done or was done. There can\n// be more than one per component.\nexport type Fiber = {\n  // These first fields are conceptually members of an Instance. This used to\n  // be split into a separate type and intersected with the other Fiber fields,\n  // but until Flow fixes its intersection bugs, we've merged them into a\n  // single type.\n\n  // An Instance is shared between all versions of a component. We can easily\n  // break this out into a separate object to avoid copying so much to the\n  // alternate versions of the tree. We put this on a single object for now to\n  // minimize the number of objects created during the initial render.\n\n  // Tag identifying the type of fiber.\n  tag: WorkTag,\n\n  // Unique identifier of this child.\n  key: null | string,\n\n  // The value of element.type which is used to preserve the identity during\n  // reconciliation of this child.\n  elementType: any,\n\n  // The resolved function/class/ associated with this fiber.\n  type: any,\n\n  // The local state associated with this fiber.\n  stateNode: any,\n\n  // Conceptual aliases\n  // parent : Instance -\u003e return The parent happens to be the same as the\n  // return fiber since we've merged the fiber and instance.\n\n  // Remaining fields belong to Fiber\n\n  // The Fiber to return to after finishing processing this one.\n  // This is effectively the parent, but there can be multiple parents (two)\n  // so this is only the parent of the thing we're currently processing.\n  // It is conceptually the same as the return address of a stack frame.\n  return: Fiber | null,\n\n  // Singly Linked List Tree Structure.\n  child: Fiber | null,\n  sibling: Fiber | null,\n  index: number,\n\n  // The ref last used to attach this node.\n  // I'll avoid adding an owner field for prod and model that as functions.\n  ref:\n    | null\n    | (((handle: mixed) =\u003e void) \u0026 {_stringRef: ?string, ...})\n    | RefObject,\n\n  // Input is the data coming into process this fiber. Arguments. Props.\n  pendingProps: any, // This type will be more specific once we overload the tag.\n  memoizedProps: any, // The props used to create the output.\n\n  // A queue of state updates and callbacks.\n  updateQueue: mixed,\n\n  // The state used to create the output\n  memoizedState: any,\n\n  // Dependencies (contexts, events) for this fiber, if it has any\n  dependencies: Dependencies | null,\n\n  // Bitfield that describes properties about the fiber and its subtree. E.g.\n  // the ConcurrentMode flag indicates whether the subtree should be async-by-\n  // default. When a fiber is created, it inherits the mode of its\n  // parent. Additional flags can be set at creation time, but after that the\n  // value should remain unchanged throughout the fiber's lifetime, particularly\n  // before its child fibers are created.\n  mode: TypeOfMode,\n\n  // Effect\n  flags: Flags,\n  subtreeFlags: Flags,\n  deletions: Array\u003cFiber\u003e | null,\n\n  // Singly linked list fast path to the next fiber with side-effects.\n  nextEffect: Fiber | null,\n\n  // The first and last fiber with side-effect within this subtree. This allows\n  // us to reuse a slice of the linked list when we reuse the work done within\n  // this fiber.\n  firstEffect: Fiber | null,\n  lastEffect: Fiber | null,\n\n  lanes: Lanes,\n  childLanes: Lanes,\n\n  // This is a pooled version of a Fiber. Every fiber that gets updated will\n  // eventually have a pair. There are cases when we can clean up pairs to save\n  // memory if we need to.\n  alternate: Fiber | null,\n\n  // Time spent rendering this Fiber and its descendants for the current update.\n  // This tells us how well the tree makes use of sCU for memoization.\n  // It is reset to 0 each time we render and only updated when we don't bailout.\n  // This field is only set when the enableProfilerTimer flag is enabled.\n  actualDuration?: number,\n\n  // If the Fiber is currently active in the \"render\" phase,\n  // This marks the time at which the work began.\n  // This field is only set when the enableProfilerTimer flag is enabled.\n  actualStartTime?: number,\n\n  // Duration of the most recent render time for this Fiber.\n  // This value is not updated when we bailout for memoization purposes.\n  // This field is only set when the enableProfilerTimer flag is enabled.\n  selfBaseDuration?: number,\n\n  // Sum of base times for all descendants of this Fiber.\n  // This value bubbles up during the \"complete\" phase.\n  // This field is only set when the enableProfilerTimer flag is enabled.\n  treeBaseDuration?: number,\n\n  // Conceptual aliases\n  // workInProgress : Fiber -\u003e  alternate The alternate used for reuse happens\n  // to be the same as work in progress.\n  // __DEV__ only\n\n  _debugSource?: Source | null,\n  _debugOwner?: Fiber | null,\n  _debugIsCurrentlyTiming?: boolean,\n  _debugNeedsRemount?: boolean,\n\n  // Used to verify that the order of hooks does not change between renders.\n  _debugHookTypes?: Array\u003cHookType\u003e | null,\n};\n`})}),`\n`,(0,n.jsx)(e.h2,{hash:\"\\u524D\\u7F6E\\u77E5\\u8BC6\",children:\"\\u524D\\u7F6E\\u77E5\\u8BC6\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u539F\\u751F\\u5143\\u7D20\\uFF08div\\uFF0Cspan\\uFF09\\u88AB\\u8BA4\\u4E3A\\u662F host\\u3002\\u4E5F\\u5C31\\u662F\\u770B\\u5230\\u5305\\u542B\\u5143\\u7D20\\u542B\\u4E49\\u7684\\u53D8\\u91CF\\u540D\\u4E2D\\u5305\\u542B host\\uFF0C\\u8BF4\\u7684\\u662F\\u539F\\u751F\\u5143\\u7D20\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"fiber \\u662F\\u5355\\u94FE\\u8868\\u7ED3\\u6784\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"tag-worktag\",children:\"Tag: WorkTag\"}),`\n`,(0,n.jsx)(e.p,{children:\"WorkTag \\u662F react \\u6E90\\u7801\\u4E2D\\u7684\\u4E00\\u4E2A\\u679A\\u4E3E\\u7C7B\\u578B\\uFF0C\\u7528\\u6765\\u8868\\u793A\\u4E00\\u4E2A fiber \\u8282\\u70B9\\u7684\\u7C7B\\u578B\\u3002\\u5B83\\u7684\\u4E3B\\u8981\\u4F5C\\u7528\\u662F\\u8F85\\u52A9 react \\u5728\\u5904\\u7406\\u66F4\\u65B0\\u8FC7\\u7A0B\\u4E2D\\u7684\\u5404\\u79CD\\u8FB9\\u754C\\u60C5\\u51B5\\uFF08\\u6839\\u636E\\u7C7B\\u578B\\u51B3\\u5B9A\\u6E32\\u67D3\\u7684\\u5904\\u7406\\u65B9\\u5F0F\\uFF09\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F8B\\u5982\\uFF0C\\u5728 react \\u4E2D\\uFF0C\\u4E00\\u4E2A fiber \\u8282\\u70B9\\u53EF\\u80FD\\u4F1A\\u8868\\u793A\\u4E00\\u4E2A\\u7EC4\\u4EF6\\uFF0C\\u4E5F\\u53EF\\u80FD\\u4F1A\\u8868\\u793A\\u4E00\\u4E2A\\u5143\\u7D20\\uFF08\\u4F8B\\u5982\\u4E00\\u4E2A HTML \\u6807\\u7B7E\\uFF09\\u3002\\u5982\\u679C\\u4E00\\u4E2A fiber \\u8282\\u70B9\\u8868\\u793A\\u7684\\u662F\\u4E00\\u4E2A\\u7C7B\\u7EC4\\u4EF6\\uFF0C\\u90A3\\u4E48\\u5B83\\u7684 WorkTag \\u5C31\\u4F1A\\u662F ClassComponent\\uFF1B\\u5982\\u679C\\u4E00\\u4E2A fiber \\u8282\\u70B9\\u8868\\u793A\\u7684\\u662F\\u4E00\\u4E2A\\u5143\\u7D20\\uFF0C\\u90A3\\u4E48\\u5B83\\u7684 WorkTag \\u5C31\\u4F1A\\u662F HostComponent\\u3002\\u7136\\u540E \\uFF0C\\u5982\\u679C\\u662F\\u7C7B\\u7EC4\\u4EF6\\uFF0C\\u5C31\\u91C7\\u7528\\u5B9E\\u4F8B\\u5316\\u7684\\u65B9\\u5F0F\\uFF0C\\u800C\\u51FD\\u6570\\u7EC4\\u4EF6\\u662F\\u6267\\u884C\\u7684\\u65B9\\u5F0F\\uFF0Cetc\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u901A\\u8FC7\\u8FD9\\u79CD\\u65B9\\u5F0F\\uFF0Creact \\u53EF\\u4EE5\\u6839\\u636E\\u4E00\\u4E2A fiber \\u8282\\u70B9\\u7684 WorkTag \\u6765\\u51B3\\u5B9A\\u5982\\u4F55\\u5904\\u7406\\u5B83\\uFF0C\\u4ECE\\u800C\\u5B9E\\u73B0\\u5BF9\\u4E0D\\u540C\\u7C7B\\u578B\\u8282\\u70B9\\u7684\\u7279\\u5B9A\\u5904\\u7406\\u3002\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// react-reconciler/src/ReactWorkTag.js\nexport const FunctionComponent = 0;\nexport const ClassComponent = 1;\nexport const IndeterminateComponent = 2; // Before we know whether it is function or class\nexport const HostRoot = 3; // Root of a host tree. Could be nested inside another node.\nexport const HostPortal = 4; // A subtree. Could be an entry point to a different renderer.\nexport const HostComponent = 5;\nexport const HostText = 6;\nexport const Fragment = 7;\nexport const Mode = 8;\nexport const ContextConsumer = 9;\nexport const ContextProvider = 10;\nexport const ForwardRef = 11;\nexport const Profiler = 12;\nexport const SuspenseComponent = 13;\nexport const MemoComponent = 14;\nexport const SimpleMemoComponent = 15;\nexport const LazyComponent = 16;\nexport const IncompleteClassComponent = 17;\nexport const DehydratedFragment = 18;\nexport const SuspenseListComponent = 19;\nexport const ScopeComponent = 21;\nexport const OffscreenComponent = 22;\nexport const LegacyHiddenComponent = 23;\nexport const CacheComponent = 24;\nexport const TracingMarkerComponent = 25;\n`})}),`\n`,(0,n.jsx)(e.h2,{hash:\"key\",children:\"Key\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6807\\u5FD7\\u5F53\\u524D\\u8282\\u70B9\\u5728\\u5F53\\u524D\\u5C42\\u7EA7\\u4E0B\\u7684\\u552F\\u4E00\\u6027\\u3002\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u5E2E\\u52A9 react \\u5728\\u66F4\\u65B0\\u65F6\\u533A\\u5206\\u540C\\u7C7B\\u5143\\u7D20\\uFF0C\\u4ECE\\u800C\\u66F4\\u5FEB\\u5730\\u5B9A\\u4F4D\\u5230\\u9700\\u8981\\u66F4\\u65B0\\u7684\\u5143\\u7D20\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u63D0\\u9AD8\\u6E32\\u67D3\\u6027\\u80FD\\uFF0C\\u56E0\\u4E3A react \\u53EF\\u4EE5\\u901A\\u8FC7 key \\u6765\\u5224\\u65AD\\u5143\\u7D20\\u662F\\u5426\\u9700\\u8981\\u66F4\\u65B0\\uFF0C\\u907F\\u514D\\u5BF9\\u4E0D\\u5FC5\\u8981\\u7684\\u5143\\u7D20\\u8FDB\\u884C\\u6E32\\u67D3\\u3002\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{hash:\"elementtype\",children:\"elementType\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53EF\\u4EE5\\u7528\\u6765\\u533A\\u5206\\u4E0D\\u540C\\u7C7B\\u578B\\u7684\\u5143\\u7D20\\uFF0C\\u4F8B\\u5982 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"div\"})}),\"\\u3001**\",(0,n.jsx)(e.code,{children:\"span\"}),(0,n.jsx)(e.strong,{children:\"\\u7B49\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0CReact \\u4F1A\\u4F7F\\u7528\"}),(0,n.jsx)(e.code,{children:\"elementType\"}),\"**\\u5C5E\\u6027\\u6765\\u786E\\u5B9A\\u8BE5\\u7EC4\\u4EF6\\u5E94\\u8BE5\\u5982\\u4F55\\u6E32\\u67D3\\u3002\\u4F8B\\u5982\\uFF0C\\u5982\\u679C **\",(0,n.jsx)(e.code,{children:\"elementType\"}),\"**\\u7684\\u503C\\u4E3A \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"div\"})}),\"\\uFF0C\\u90A3\\u4E48 React \\u5C31\\u4F1A\\u6E32\\u67D3\\u4E00\\u4E2A \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"div\"})}),\" \\u5143\\u7D20\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{hash:\"type\",children:\"Type\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5927\\u90E8\\u5206\\u65F6\\u5019\\u548C elementType \\u4E00\\u6837\\uFF0C\\u6807\\u5FD7\\u7EC4\\u4EF6\\u7684\\u7C7B\\u578B\\u3002\\u533A\\u5206\\u5F53\\u524D\\u7EC4\\u4EF6\\u662F\\u7C7B\\u7EC4\\u4EF6\\uFF0C\\u51FD\\u6570\\u7EC4\\u4EF6\\u7B49\\uFF0C\\u539F\\u751F\\u6807\\u7B7E\\u3002\"}),`\n`,(0,n.jsx)(e.h3,{hash:\"statenode\",children:\"stateNode\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7EC4\\u4EF6\\u5BF9\\u5E94\\u7684 dom \\u8282\\u70B9\\uFF0C\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u51FD\\u6570\\u7EC4\\u4EF6 stateNode \\u4E3A null\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u7C7B\\u7EC4\\u4EF6\\u6307\\u5411\\u5B9E\\u4F8B\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"return\",children:\"return\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u662F\\u4E00\\u4E2A\\u6307\\u9488\\uFF0C\\u5B83\\u6307\\u5411\\u5F53\\u524D\\u7EC4\\u4EF6\\u7684\\u7236\\u7EC4\\u4EF6\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0CReact \\u4F1A\\u4F7F\\u7528\\u8FD9\\u4E2A\\u6307\\u9488\\u6765\\u904D\\u5386\\u7EC4\\u4EF6\\u7684\\u5C42\\u7EA7\\u5173\\u7CFB\\uFF0C\\u6700\\u7EC8\\u6784\\u5EFA\\u51FA\\u4E00\\u9897\\u6811\\u5F62\\u7ED3\\u6784\\uFF0C\\u8868\\u793A\\u6574\\u4E2A\\u7EC4\\u4EF6\\u7684\\u7ED3\\u6784\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"child\",children:\"child\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B50\\u8282\\u70B9\\uFF0C\\u6307\\u5411\\u5B50\\u8282\\u70B9\\u7684\\u5934\\u8282\\u70B9\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"sibling\",children:\"sibling\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5F53\\u524D\\u5C42\\u6B21\\u7684\\u4E0B\\u4E00\\u4E2A\\u5144\\u5F1F\\u8282\\u70B9\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"index\",children:\"index\"}),`\n`,(0,n.jsx)(e.p,{children:\"fiber child \\u662F\\u5355\\u94FE\\u8868\\u7ED3\\u6784\\uFF0Cdiff \\u65F6\\u9700\\u8981\\u77E5\\u9053\\u5F53\\u524D\\u8282\\u70B9\\u5728\\u5F53\\u524D\\u5C42\\u7EA7\\u4E0B\\u7684\\u4F4D\\u7F6E\\uFF0Cdom diff \\u7684\\u65F6\\u5019\\u9700\\u8981\\u77E5\\u9053\\u8282\\u70B9\\u7684\\u4F4D\\u7F6E\\u6709\\u6CA1\\u6709\\u53D1\\u751F\\u53D8\\u5316\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"key \\u548C index \\u53C2\\u4E0E dom diff \\u7B97\\u6CD5\\u7684\\u540C\\u5C42\\u7EA7\\u6BD4\\u8F83\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"ref\",children:\"ref\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u4E2A\\u5C5E\\u6027\\u7528\\u4E8E\\u5B58\\u50A8\\u7EC4\\u4EF6\\u7684\\u5F15\\u7528\\u3002\\u5F53\\u7EC4\\u4EF6\\u9700\\u8981\\u8BBF\\u95EE\\u6216\\u4FEE\\u6539\\u5176\\u81EA\\u8EAB\\u7684\\u5C5E\\u6027\\u65F6\\uFF0C\\u901A\\u5E38\\u4F1A\\u4F7F\\u7528\\u8FD9\\u4E2A\\u5C5E\\u6027\\u3002\\u5B83\\u53EF\\u4EE5\\u662F \",(0,n.jsx)(e.code,{children:\"null\"}),\"\\uFF08\\u6CA1\\u6709\\u5F15\\u7528\\uFF09\\uFF0C\\u4E00\\u4E2A\\u51FD\\u6570\\uFF08\\u7528\\u4E8E\\u5728 DOM \\u4E2D\\u8BBE\\u7F6E\\u6216\\u66F4\\u65B0\\u5C5E\\u6027\\u503C\\uFF09\\uFF0C\\u6216\\u8005\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"RefObject\"}),\"\\uFF08\\u7528\\u4E8E\\u5728\\u51FD\\u6570\\u5F0F\\u7EC4\\u4EF6\\u4E2D\\u8BBF\\u95EE\\u548C\\u4FEE\\u6539\\u5C5E\\u6027\\u503C\\uFF09\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{hash:\"pendingprops\",children:\"pendingProps:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B58\\u50A8\\u7740\\u7EC4\\u4EF6\\u7684\\u672A\\u66F4\\u65B0\\u7684\\u5C5E\\u6027\\u503C\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u5982\\u679C\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u7684\\u5C5E\\u6027\\u503C\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\uFF0CReact \\u4F1A\\u5148\\u5C06\\u65B0\\u7684\\u5C5E\\u6027\\u503C\\u5B58\\u50A8\\u5728 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"pendingProps\"})}),`\n\\u4E2D\\uFF0C\\u7136\\u540E\\u5728\\u4E0B\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u518D\\u66F4\\u65B0\\u5230\\u7EC4\\u4EF6\\u4E0A\\u3002\\u8FD9\\u6837\\u505A\\u7684\\u76EE\\u7684\\u662F\\u4E3A\\u4E86\\u8BA9\\u66F4\\u65B0\\u66F4\\u52A0\\u9AD8\\u6548\\uFF0C\\u51CF\\u5C11\\u4E0D\\u5FC5\\u8981\\u7684\\u6E32\\u67D3\\u3002`]}),`\n`,(0,n.jsx)(e.h2,{hash:\"memorizedprops\",children:\"memorizedProps:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B58\\u50A8\\u7740\\u7EC4\\u4EF6\\u7684\\u4E0A\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u7684\\u5C5E\\u6027\\u503C\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0CReact \\u4F1A\\u4F7F\\u7528 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"memorizedProps\"})}),`\n\\u6765\\u5BF9\\u6BD4\\u5F53\\u524D\\u7684\\u5C5E\\u6027\\u503C\\u548C\\u4E0A\\u4E00\\u6B21\\u7684\\u5C5E\\u6027\\u503C\\uFF0C\\u4EE5\\u786E\\u5B9A\\u54EA\\u4E9B\\u5C5E\\u6027\\u503C\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\u3002\\u5982\\u679C\\u67D0\\u4E2A\\u5C5E\\u6027\\u503C\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\uFF0CReact \\u4F1A\\u5C06\\u65B0\\u7684\\u5C5E\\u6027\\u503C\\u5B58\\u50A8\\u5728 **`,(0,n.jsx)(e.code,{children:\"pendingProps\"}),\"**\\u4E2D\\uFF0C\\u7B49\\u5F85\\u4E0B\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u518D\\u66F4\\u65B0\\u5230\\u7EC4\\u4EF6\\u4E0A\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{hash:\"updatequeue\",children:\"updateQueue\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u66F4\\u65B0\\u7684\\u961F\\u5217\\uFF0C\\u5B83\\u7528\\u4E8E\\u5B58\\u50A8\\u5F85\\u66F4\\u65B0\\u7684\\u7EC4\\u4EF6\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u5982\\u679C\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u7684 state \\u6216 props \\u53D1\\u751F\\u4E86\\u6539\\u53D8\\uFF0CReact \\u4F1A\\u5C06\\u8BE5\\u7EC4\\u4EF6\\u6DFB\\u52A0\\u5230 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"updateQueue\"})}),\" \\u4E2D\\uFF0C\\u7B49\\u5F85\\u4E0B\\u4E00\\u6B21\\u66F4\\u65B0\\u65F6\\u518D\\u8FDB\\u884C\\u6E32\\u67D3\\u3002\\u8D77\\u5230\\u4E86\\u7F13\\u5B58\\u7EC4\\u4EF6\\u66F4\\u65B0\\u7684\\u4F5C\\u7528\\uFF0C\\u5E2E\\u52A9 React \\u66F4\\u9AD8\\u6548\\u5730\\u7BA1\\u7406\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{hash:\"memoizedstate\",children:\"memoizedState\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B58\\u50A8\\u7740\\u7EC4\\u4EF6\\u7684\\u4E0A\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u7684\\u72B6\\u6001\\u503C\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0CReact \\u4F1A\\u4F7F\\u7528 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"memoizedState\"})}),`\n\\u6765\\u5BF9\\u6BD4\\u5F53\\u524D\\u7684\\u72B6\\u6001\\u503C\\u548C\\u4E0A\\u4E00\\u6B21\\u7684\\u72B6\\u6001\\u503C\\uFF0C\\u4EE5\\u786E\\u5B9A\\u54EA\\u4E9B\\u72B6\\u6001\\u503C\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\u3002\\u5982\\u679C\\u67D0\\u4E2A\\u72B6\\u6001\\u503C\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\uFF0CReact \\u4F1A\\u5C06\\u65B0\\u7684\\u72B6\\u6001\\u503C\\u5B58\\u50A8\\u5728 **`,(0,n.jsx)(e.code,{children:\"pendingState\"}),\"**\\u4E2D\\uFF0C\\u7B49\\u5F85\\u4E0B\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u518D\\u66F4\\u65B0\\u5230\\u7EC4\\u4EF6\\u4E0A\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5982\\u679C\\u662F\\u7C7B\\u7EC4\\u4EF6\\uFF0C\\u6307\\u5411 state\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5982\\u679C\\u662F\\u51FD\\u6570\\u7EC4\\u4EF6\\uFF0C\\u6307\\u5411 hook \\u7684 fiber \\u5934\\u8282\\u70B9\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"dependencies\",children:\"dependencies\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B58\\u50A8\\u7740\\u7EC4\\u4EF6\\u4F9D\\u8D56\\u7684\\u5916\\u90E8\\u8D44\\u6E90\\u7684\\u4FE1\\u606F\\u3002\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\uFF0CReact \\u4F1A\\u4F7F\\u7528 \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"dependencies\"})}),`\n\\u5C5E\\u6027\\u6765\\u786E\\u5B9A\\u7EC4\\u4EF6\\u662F\\u5426\\u9700\\u8981\\u91CD\\u65B0\\u6E32\\u67D3\\u3002\\u5982\\u679C\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u4F9D\\u8D56\\u7684\\u5916\\u90E8\\u8D44\\u6E90\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\uFF0C\\u90A3\\u4E48 React \\u5C31\\u4F1A\\u91CD\\u65B0\\u6E32\\u67D3\\u8BE5\\u7EC4\\u4EF6\\uFF0C\\u4EE5\\u786E\\u4FDD\\u7EC4\\u4EF6\\u5185\\u5BB9\\u59CB\\u7EC8\\u4FDD\\u6301\\u6700\\u65B0\\u3002`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F8B\\u5982 context\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"mode\",children:\"Mode\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"**\",(0,n.jsx)(e.code,{children:\"Mode\"}),(0,n.jsx)(e.strong,{children:\"\\u662F\\u4E00\\u4E2A\\u679A\\u4E3E\\u7C7B\\u578B\\uFF0C\\u5B83\\u7528\\u4E8E\\u8868\\u793A\\u7EC4\\u4EF6\\u5F53\\u524D\\u7684\\u6E32\\u67D3\\u6A21\\u5F0F\\u3002React \\u652F\\u6301\\u4E24\\u79CD\\u6E32\\u67D3\\u6A21\\u5F0F\\uFF1A\\u540C\\u6B65\\u6E32\\u67D3\\u6A21\\u5F0F\\u548C\\u5F02\\u6B65\\u6E32\\u67D3\\u6A21\\u5F0F\\u3002\\u5728\\u540C\\u6B65\\u6E32\\u67D3\\u6A21\\u5F0F\\u4E0B\\uFF0CReact \\u4F1A\\u5728\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u4E2D\\u7ACB\\u5373\\u6267\\u884C\\u6240\\u6709\\u66F4\\u65B0\\u64CD\\u4F5C\\uFF0C\\u5E76\\u7ACB\\u5373\\u8FDB\\u884C\\u6E32\\u67D3\\u3002\\u800C\\u5728\\u5F02\\u6B65\\u6E32\\u67D3\\u6A21\\u5F0F\\u4E0B\\uFF0CReact \\u4F1A\\u5C06\\u66F4\\u65B0\\u64CD\\u4F5C\\u63A8\\u8FDF\\u5230\\u4E0B\\u4E00\\u4E2A\\u6E32\\u67D3\\u5468\\u671F\\u4E2D\\u6267\\u884C\\uFF0C\\u4EE5\\u63D0\\u9AD8\\u6E32\\u67D3\\u7684\\u6548\\u7387\\u3002\"}),(0,n.jsx)(e.code,{children:\"Mode\"}),\"**\\u5C5E\\u6027\\u7528\\u4E8E\\u8868\\u793A\\u7EC4\\u4EF6\\u5F53\\u524D\\u6240\\u5904\\u7684\\u6E32\\u67D3\\u6A21\\u5F0F\\uFF0C\\u5E2E\\u52A9 React \\u7BA1\\u7406\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u3002\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"NoMode\"})}),\"\\uFF1A\\u8868\\u793A\\u7EC4\\u4EF6\\u5904\\u4E8E\\u521D\\u59CB\\u72B6\\u6001\\uFF0C\\u6CA1\\u6709\\u8FDB\\u5165\\u6E32\\u67D3\\u6D41\\u7A0B\\u3002\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"StrictMode\"})}),\"\\uFF1A\\u8868\\u793A\\u7EC4\\u4EF6\\u5904\\u4E8E\\u4E25\\u683C\\u6A21\\u5F0F\\uFF0C\\u5728\\u8FD9\\u79CD\\u6A21\\u5F0F\\u4E0B\\uFF0CReact \\u4F1A\\u5BF9\\u7EC4\\u4EF6\\u7684\\u6E32\\u67D3\\u8FC7\\u7A0B\\u8FDB\\u884C\\u66F4\\u4E25\\u683C\\u7684\\u68C0\\u67E5\\uFF0C\\u5E76\\u5728\\u63A7\\u5236\\u53F0\\u8F93\\u51FA\\u8B66\\u544A\\u4FE1\\u606F\\u3002\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E25\\u683C\\u6A21\\u5F0F\\u4E0B\\u7684\\u7EC4\\u4EF6\\u4F1A\\u66F4\\u52A0\\u6CE8\\u91CD\\u6027\\u80FD\\uFF0C\\u5E76\\u4E14\\u4F1A\\u63D0\\u9192\\u5F00\\u53D1\\u8005\\u907F\\u514D\\u4E00\\u4E9B\\u5E38\\u89C1\\u7684\\u9519\\u8BEF\\uFF0C\\u4F8B\\u5982\\u4F7F\\u7528\\u4E86\\u672A\\u7ECF\\u521D\\u59CB\\u5316\\u7684 state \\u6216 props \\u7B49\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"flag\",children:\"Flag\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4EE3\\u8868\\u8BE5 fiber \\u8981\\u8FDB\\u884C\\u4EC0\\u4E48\\u64CD\\u4F5C\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4EE3\\u7801\\u6CE8\\u91CA\\u5199\\u7684\\u662F effect \\uFF0C\\u526F\\u4F5C\\u7528\\uFF0C\\u4E0D\\u597D\\u7406\\u89E3\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B83\\u7684\\u503C\\u7684\\u7C7B\\u578B\\u662F Flags \\u7C7B\\u578B\\uFF0C\\u662F\\u4E00\\u79CD\\u7279\\u6B8A\\u7684\\u6570\\u636E\\u7C7B\\u578B\\uFF0C\\u7528\\u6765\\u5B58\\u50A8\\u7EC4\\u4EF6\\u7684\\u72B6\\u6001\\u4FE1\\u606F\\u3002\\u5B83\\u53EF\\u4EE5\\u5305\\u542B\\u591A\\u4E2A\\u4E8C\\u8FDB\\u5236\\u4F4D\\uFF0C\\u6BCF\\u4E2A\\u4F4D\\u90FD\\u4EE3\\u8868\\u7740\\u4E00\\u79CD\\u72B6\\u6001\\u3002\\u4F8B\\u5982\\uFF0C\\u4E00\\u4E2A\\u7EC4\\u4EF6\\u7684 Flags \\u7C7B\\u578B\\u7684\\u503C\\u53EF\\u80FD\\u5305\\u542B isMounted\\u3001hasNewUpdates \\u7B49\\u4FE1\\u606F\\uFF0C\\u8868\\u793A\\u7EC4\\u4EF6\\u662F\\u5426\\u5DF2\\u6302\\u8F7D\\u3001\\u662F\\u5426\\u6709\\u65B0\\u7684\\u66F4\\u65B0\\u7B49\\u72B6\\u6001\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 React \\u4E2D\\uFF0CFlags \\u7C7B\\u578B\\u901A\\u5E38\\u4E0E React Fiber \\u7ED3\\u5408\\u4F7F\\u7528\\uFF0C\\u7528\\u6765\\u7EF4\\u62A4\\u7EC4\\u4EF6\\u7684\\u72B6\\u6001\\u4FE1\\u606F\\uFF0C\\u4EE5\\u4FBF\\u5728\\u4E0B\\u4E00\\u6B21\\u6E32\\u67D3\\u65F6\\u8FDB\\u884C\\u66F4\\u65B0\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"subtreeflags\",children:\"subtreeFlags\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8868\\u793A\\u8BE5 fiber \\u7684\\u5B50\\u6811\\u662F\\u5426\\u9700\\u8981\\u91CD\\u65B0\\u6E32\\u67D3\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"deletions\",children:\"deletions\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u9700\\u8981\\u5220\\u9664\\u7684\\u5B50\\u8282\\u70B9\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"lanes\",children:\"lanes\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B83\\u63CF\\u8FF0\\u4E86 React \\u5982\\u4F55\\u5728\\u4E0D\\u540C\\u7684\\u4F18\\u5148\\u7EA7\\u4E4B\\u95F4\\u5206\\u914D\\u65F6\\u95F4\\u4EE5\\u66F4\\u65B0\\u5E94\\u7528\\u7684 UI\\u3002\\u901A\\u8FC7\\u4F7F\\u7528 Lanes\\uFF0CReact \\u53EF\\u4EE5\\u66F4\\u5FEB\\u5730\\u66F4\\u65B0 UI\\uFF0C\\u63D0\\u9AD8\\u5E94\\u7528\\u7684\\u6027\\u80FD\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 React Fiber \\u4E2D\\uFF0CLanes \\u53EF\\u4EE5\\u6709\\u4E0D\\u540C\\u7684\\u53D6\\u503C\\uFF0C\\u6BCF\\u4E00\\u4E2A\\u53D6\\u503C\\u90FD\\u8868\\u793A\\u4E00\\u4E2A\\u4E0D\\u540C\\u7684\\u4F18\\u5148\\u7EA7\\u3002\\u4F8B\\u5982\\uFF0C\\u53EF\\u80FD\\u4F1A\\u6709\\u4E00\\u4E2A \\u201Chigh priority\\u201D \\u7684 lane\\uFF0C\\u8868\\u793A\\u5E94\\u7528\\u7684 UI \\u5C06\\u4F18\\u5148\\u4E8E\\u5176\\u4ED6\\u5185\\u5BB9\\u66F4\\u65B0\\uFF0C\\u5E76\\u4E14\\u53EF\\u80FD\\u4F1A\\u6709\\u4E00\\u4E2A \\u201Clow priority\\u201D \\u7684 lane\\uFF0C\\u8868\\u793A\\u5E94\\u7528\\u7684 UI \\u5C06\\u5728\\u5176\\u4ED6\\u5185\\u5BB9\\u66F4\\u65B0\\u5B8C\\u6210\\u540E\\u518D\\u66F4\\u65B0\\u3002\\u5177\\u4F53\\u6765\\u8BF4\\uFF0CLanes \\u7684\\u53D6\\u503C\\u53EF\\u4EE5\\u662F\\u4EFB\\u610F\\u6574\\u6570\\uFF0C\\u6570\\u5B57\\u8D8A\\u5927\\u8868\\u793A\\u4F18\\u5148\\u7EA7\\u8D8A\\u9AD8\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4F8B\\u5982\\uFF0C\\u5982\\u679C\\u4E00\\u4E2A React \\u5E94\\u7528\\u6B63\\u5728\\u6267\\u884C\\u4E00\\u4E2A\\u64CD\\u4F5C\\uFF0C\\u6BD4\\u5982\\u6EDA\\u52A8\\u9875\\u9762\\uFF0C\\u90A3\\u4E48\\u8FD9\\u4E2A\\u64CD\\u4F5C\\u53EF\\u80FD\\u4F1A\\u88AB\\u5206\\u914D\\u5230\\u4E00\\u4E2A \\u201Chigh priority\\u201D \\u7684 lane \\u4E2D\\uFF0C\\u8FD9\\u6837 React \\u5C31\\u53EF\\u4EE5\\u4F18\\u5148\\u5904\\u7406\\u6EDA\\u52A8\\u64CD\\u4F5C\\uFF0C\\u4FDD\\u8BC1\\u5E94\\u7528\\u7684\\u6D41\\u7545\\u6027\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"Lanes \\u6A21\\u578B\\u901A\\u8FC7\\u4F4D\\u63A9\\u7801\\u6765\\u8868\\u793A\\u4EFB\\u52A1\\u7684\\u4F18\\u5148\\u7EA7\\u3002\\u6BCF\\u4E2A\\u4EFB\\u52A1\\u90FD\\u6709\\u4E00\\u4E2A lanes \\u5B57\\u6BB5\\uFF0C\\u662F\\u4E00\\u4E2A\\u4EC5\\u5305\\u542B\\u4E00\\u4F4D\\u7684\\u4F4D\\u63A9\\u7801\\u3002\\u901A\\u8FC7\\u76F4\\u63A5\\u64CD\\u4F5C\\u4F4D\\u63A9\\u7801\\uFF0C\\u53EF\\u4EE5\\u89E3\\u8026\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u548C\\u6279\\u5904\\u7406\\u6982\\u5FF5\\u3002\\u4F8B\\u5982\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\\u5982\\u4E0B\\u4EE3\\u7801\\u6765\\u5224\\u65AD\\u4E00\\u4E2A\\u4EFB\\u52A1\\u662F\\u5426\\u5305\\u542B\\u5728\\u4E00\\u7EC4\\u4EFB\\u52A1\\u4E2D\\uFF1A\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"const isTaskIncludedInBatch = (task \u0026 batchOfTasks) !== 0;\"})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728 Lanes \\u6A21\\u578B\\u4E2D\\uFF0C\\u901A\\u8FC7\\u5BF9\\u4F4D\\u63A9\\u7801\\u8FDB\\u884C\\u4F4D\\u8FD0\\u7B97\\uFF0C\\u53EF\\u4EE5\\u66F4\\u65B9\\u4FBF\\u5730\\u5904\\u7406\\u4EFB\\u52A1\\u4F18\\u5148\\u7EA7\\u548C\\u6279\\u5904\\u7406\\u4E4B\\u95F4\\u7684\\u5173\\u7CFB\\u3002\\u53E6\\u5916\\uFF0C\\u901A\\u8FC7\\u4F4D\\u8FD0\\u7B97\\uFF0C\\u53EF\\u4EE5\\u66F4\\u6709\\u6548\\u5730\\u8868\\u8FBE\\u4EFB\\u52A1\\u7EC4\\uFF0C\\u6BD4\\u5982\\u5728\\u4E00\\u4E2A\\u8303\\u56F4\\u5185\\u8868\\u793A\\u4E00\\u7EC4\\u4E0D\\u540C\\u7684\\u4EFB\\u52A1\\u3002\\u901A\\u8FC7 Lanes \\u6A21\\u578B\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u66F4\\u597D\\u5730\\u63A7\\u5236\\u4EFB\\u52A1\\u7684\\u6267\\u884C\\u987A\\u5E8F\\u548C\\u4F18\\u5148\\u7EA7\\uFF0C\\u4EE5\\u63D0\\u9AD8\\u4EFB\\u52A1\\u7684\\u5904\\u7406\\u6548\\u7387\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"childlanes\",children:\"childLanes\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u8868\\u793A\\u8BE5 fiber \\u7684\\u5B50\\u8282\\u70B9\\u9700\\u8981\\u91CD\\u65B0\\u6E32\\u67D3\\u7684\\u4F18\\u5148\\u7EA7\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"alternate\",children:\"alternate\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5728\\u7EC4\\u4EF6\\u66F4\\u65B0\\u65F6\\u5B58\\u653E\\u8001\\u8282\\u70B9\\uFF0C\\u76F8\\u5F53\\u4E8E\\u8001\\u8282\\u70B9\\u7F13\\u5B58\"}),`\n`,(0,n.jsx)(e.h2,{hash:\"executioncontext\",children:\"ExecutionContext\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5B83\\u63CF\\u8FF0\\u4E86\\u5F53\\u524D\\u7EC4\\u4EF6\\u6267\\u884C\\u65F6\\u7684\\u4E0A\\u4E0B\\u6587\\u3002ExecutionContext \\u5305\\u542B\\u4E86\\u5F53\\u524D\\u7EC4\\u4EF6\\u7684 props\\u3001state \\u4EE5\\u53CA\\u5176\\u4ED6\\u4E00\\u4E9B\\u76F8\\u5173\\u4FE1\\u606F\\uFF0C\\u4F8B\\u5982\\u4E0A\\u4E0B\\u6587\\u7684\\u7C7B\\u578B\\uFF08\\u6BD4\\u5982\\u7C7B\\u7EC4\\u4EF6\\u8FD8\\u662F\\u51FD\\u6570\\u7EC4\\u4EF6\\uFF09\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"ExecutionContext \\u53EF\\u4EE5\\u88AB\\u7528\\u6765\\u5E2E\\u52A9 React \\u8FDB\\u884C\\u6027\\u80FD\\u4F18\\u5316\\uFF0C\\u4F8B\\u5982\\u901A\\u8FC7\\u5206\\u6790 ExecutionContext \\u6765\\u51B3\\u5B9A\\u54EA\\u4E9B\\u7EC4\\u4EF6\\u9700\\u8981\\u66F4\\u65B0\\uFF0C\\u4ECE\\u800C\\u907F\\u514D\\u4E0D\\u5FC5\\u8981\\u7684\\u7EC4\\u4EF6\\u6E32\\u67D3\\u3002\"}),`\n`,(0,n.jsx)(e.h3,{hash:\"\\u4EC0\\u4E48\\u662F-fiber-\",children:\"\\u4EC0\\u4E48\\u662F fiber \\uFF1F\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u662F react \\u7528\\u4E8E\\u5904\\u7406\\u7EC4\\u4EF6\\u6E32\\u67D3\\u7684\\u4E00\\u79CD\\u975E\\u963B\\u585E\\u4F18\\u5316\\u65B9\\u6848\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u662F\\u5904\\u7406\\u7EC4\\u4EF6\\u6E32\\u67D3\\u4EFB\\u52A1\\u7684\\u5DE5\\u4F5C\\u5355\\u5143\\uFF0C\\u6BCF\\u6B21\\u8981\\u6E32\\u67D3\\u6216\\u66F4\\u65B0\\u6E32\\u67D3\\u7EC4\\u4EF6\\uFF0C\\u90FD\\u9700\\u8981\\u521B\\u5EFA\\u5BF9\\u5E94\\u7684 fiber\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5BF9\\u5E94\\u5F85\\u6E32\\u67D3\\u7684\\u7EC4\\u4EF6\\uFF0C\\u5305\\u542B\\u7EC4\\u4EF6\\u7684\\u7C7B\\u578B\\u3001\\u5C5E\\u6027\\u3001\\u72B6\\u6001\\u548C\\u6E32\\u67D3\\u65B9\\u6CD5\\u7B49\\uFF0C\\u5728\\u5904\\u7406\\u65F6\\u8FD8\\u4F1A\\u521B\\u5EFA\\u5176\\u5B50\\u7EC4\\u4EF6\\u7684 fiber\\uFF0C\\u6784\\u5EFA\\u51FA fiber \\u6811\\u3002\"}),`\n`,(0,n.jsx)(e.li,{children:\"fiber \\u6811\\u662F\\u7528\\u6765\\u7BA1\\u7406\\u6240\\u6709\\u5F85\\u6E32\\u67D3\\u7684\\u7EC4\\u4EF6\\u7684\\u6811\\u5F62\\u7ED3\\u6784\\uFF0Cfiber \\u6811\\u4E2D\\u7684\\u6BCF\\u4E2A\\u8282\\u70B9\\u90FD\\u662F\\u4E00\\u4E2A fiber \\u5BF9\\u8C61.\"}),`\n`]})]})}function T(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(c,t)})):c(t)}var w=T;return x(C);})();\n;return Component;"},"__N_SSG":true},"page":"/[[...id]]","query":{"id":["react-src","fiber-node"]},"buildId":"tm4WpqTZk4RfqfoaAvJmO","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>